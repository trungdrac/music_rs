(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{121:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),r=s(26),c=s.n(r),i=s(14),o=s(7),l=s(8),u=s(10),d=s(9),h=s(5),j=s(90),p=s(19),m=s(16),b="SET_CURRENT_USER",g="SET_CURRENT_SONG_ID",O="PLAY_AUDIO",x="PAUSE_AUDIO",f="SET_CURRENT_TIME",y="SET_PROGRESS_PERCENT",v="SET_CURRENT_INDEX",N="SET_DURATION",_="SET_REPEAT",k="TOGGLE_RANDOM",w="SET_VOLUME",S="SET_LIST_PLAYING",C="SET_SONGS",P="SET_SONG_DETAIL",T="SET_AREAS",L="SET_SONG_CATEGORY",I="SET_PLAYLIST_AREA",R="SET_MY_PLAYLIST",M="SET_PLAYLIST_DETAIL",E="SET_ARTIST_AREA",A="SET_ARTIST_DETAIL",D="SET_SEARCH_SUGGEST",B="SET_FILTER_RESULT",F="SET_SEARCH_RESULT",q="SET_LIKED_SONG_COUNT",U="SET_MY_PLAYLIST_COUNT",G="SET_HISTORY_LISTEN",K="SET_RECOMMENDATION",H="SET_CHART",V=function(e){return{type:q,count:e}},z=function(e){return{type:K,songs:e}},Y=s(13),X=s.n(Y),J=function(){return{type:O}},Q=function(e){return{type:v,newIndex:e}},Z=function(){return{type:k}},$=function(e){return{type:S,listPlaying:e}};function W(e){var t=e.title,s=void 0===t?"":t,n=e.message,a=void 0===n?"":n,r=e.type,c=void 0===r?"info":r,i=e.duration,o=void 0===i?3e3:i,l=document.getElementById("my-toast");if(l){var u=document.createElement("div"),d=setTimeout((function(){l.removeChild(u)}),o+1e3);u.onclick=function(e){e.target.closest(".toast__close")&&(l.removeChild(u),clearTimeout(d))};var h=(o/1e3).toFixed(2);u.classList.add("my-toast","toast--".concat(c)),u.style.animation="slideInLeft ease .3s, fadeOut linear 1s ".concat(h,"s forwards"),u.innerHTML='\n                      <div class="toast__content">\n                          <h3 class="toast__title">'.concat(s,'</h3>\n                          <p class="toast__msg">').concat(a,'</p>\n                      </div>\n                      <span class="toast__close">&times;</span>\n                  '),l.appendChild(u)}}var ee=s(11),te=s(12),se=s(30),ne=s(40),ae=function(e){return{type:R,playlists:e}},re=function(e){return{type:U,count:e}},ce=s(89),ie=s(128),oe=s(129),le=s(87),ue=function(e){return new Date(1e3*e).toISOString().substr(14,5)},de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Asia/Jakarta";return new Date(e).toLocaleString("vi-VN",{timeZone:t})};function he(e){var t=document.getElementById("player-audio");if(t)switch(e.keyCode){case 32:e.preventDefault(),t.paused?t.play():t.pause();break;case 37:t.currentTime-=5;break;case 39:t.currentTime+=5;break;case 38:e.preventDefault(),t.volume<=.9?t.volume+=.1:t.volume=1;break;case 40:e.preventDefault(),t.volume>=.1?t.volume-=.1:t.volume=0}}function je(e){var t,s=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];clearTimeout(t),t=setTimeout((function(){e.apply(s,r)}),n)}}var pe=function(e){return{type:F,result:e}},me=s(0),be=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).getLike=function(){if(n.props.song){var e=n.props.song._id,t=n.props.user;t.userToken&&X.a.get("/interaction/detail?user=".concat(t.userId,"&song=").concat(e),{headers:{Authorization:"Bearer ".concat(t.userToken)}}).then((function(e){return n.setState({like:e.data})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}},n.like=function(){var e=n.props.song._id,t=n.props.user,s=n.props.likedSongCount;X.a.get("/interaction/like?user=".concat(t.userId,"&song=").concat(e),{headers:{Authorization:"Bearer ".concat(t.userToken)}}).then((function(e){return n.setState({like:e.data})})).then((function(){!0===n.state.like?n.props.setLikedSongCount(s+1):n.props.setLikedSongCount(s-1)})).then((function(){return W({title:"Th\xe0nh c\xf4ng!",message:"\u0110\xe3 ".concat(n.state.like?"th\xeam v\xe0o":"x\xf3a kh\u1ecfi"," b\xe0i h\xe1t y\xeau th\xedch!"),type:"success"})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))},n.getPlaylist=function(){var e=n.props.user;X.a.get("/user/".concat(e.userId,"/my-playlist/all"),{headers:{Authorization:"Bearer ".concat(e.userToken)}}).then((function(e){return n.setState({listPlaylist:e.data})})).then((function(){return n.setState({showPlaylistModal:!0})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))},n.addToPlaylist=function(e){var t=n.props.song._id,s=n.props.user;X.a.get("/user/my-playlist/".concat(e,"/add/").concat(t),{headers:{Authorization:"Bearer ".concat(s.userToken)}}).then((function(e){e.data.success&&(W({title:"Th\xe0nh c\xf4ng!",message:e.data.success,type:"success"}),n.getPlaylist()),e.data.error&&W({title:"Th\u1ea5t b\u1ea1i!",message:e.data.error,type:"error"})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))},n.createPlaylist=function(e){e.preventDefault();var t=n.props.user,s=Object(ne.a)({},e.target[0].name,e.target[0].value);""===s.title?W({title:"Th\u1ea5t b\u1ea1i!",message:"T\xean playlist kh\xf4ng \u0111\u01b0\u1ee3c r\u1ed7ng!",type:"error"}):X.a.post("/user/".concat(t.userId,"/my-playlist/create"),s,{headers:{Authorization:"Bearer ".concat(t.userToken)}}).then((function(t){t.data.success&&(W({title:"Th\xe0nh c\xf4ng!",message:t.data.success,type:"success"}),e.target[0].value="",n.getPlaylist(),n.props.setMyPlaylistCount(n.props.myPlaylistCount+1)),t.data.error&&W({title:"Th\u1ea5t b\u1ea1i!",message:t.data.error,type:"error"})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))},n.playNext=function(){var e=n.props,t=e.currentIndex,s=e.listPlaying,a=e.song,r=s.findIndex((function(e){return e._id===a._id})),c=Object(se.a)(s);-1!==r?r<t?(n.props.setCurrentIndex(t-1),c.splice(r,1),c.splice(t,0,a)):(c.splice(r,1),c.splice(t+1,0,a)):c.splice(t+1,0,a),n.props.setListPlaying(c),W({title:"Th\xe0nh c\xf4ng!",message:"B\xe0i h\xe1t s\u1ebd \u0111\u01b0\u1ee3c ph\xe1t ti\u1ebfp theo!",type:"success"})},n.playLast=function(){var e=n.props,t=e.currentIndex,s=e.listPlaying,a=e.song,r=s.findIndex((function(e){return e._id===a._id})),c=Object(se.a)(s);-1!==r&&(r<t&&n.props.setCurrentIndex(t-1),c.splice(r,1)),c.splice(c.length,0,a),n.props.setListPlaying(c),W({title:"Th\xe0nh c\xf4ng!",message:"\u0110\xe3 th\xeam v\xe0o danh s\xe1ch ch\u1edd ph\xe1t!",type:"success"})},n.remove=function(){var e=n.props,t=e.currentIndex,s=e.listPlaying,a=e.song,r=Object(se.a)(s),c=r.findIndex((function(e){return e._id===a._id}));c<t&&n.props.setCurrentIndex(t-1),r.splice(c,1),n.props.setListPlaying(r),W({title:"Th\xe0nh c\xf4ng!",message:"\u0110\xe3 x\xf3a kh\u1ecfi ch\u1edd ph\xe1t!",type:"success"})},n.getInfo=function(){n.props.song&&n.props.history.push("/song/detail/".concat(n.props.song._id)),n.props.playlist&&n.props.history.push("/playlist/detail/".concat(n.props.playlist._id))},n.copyLink=function(){navigator.permissions.query({name:"clipboard-write"}).then((function(e){"granted"!==e.state&&"prompt"!==e.state||navigator.clipboard.writeText("".concat(window.location.host,"/song/detail/").concat(n.props.song._id)).then((function(){return W({title:"Th\xe0nh c\xf4ng!",message:"\u0110\xe3 copy link v\xe0o clipboard!",type:"success"})}),(function(){return W({title:"Th\u1ea5t b\u1ea1i!",message:"Link ch\u01b0a \u0111\u01b0\u1ee3c copy!",type:"error"})}))}))},n.download=function(){var e=n.props,t=e.user,s={link:e.song.url};X.a.post("/user/download",s,{headers:{Authorization:"Bearer ".concat(t.userToken)}}).then((function(e){return window.open(e.data)})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))},n.deleteMyPlaylist=function(){if(n.props.playlist){var e=n.props,t=e.playlist,s=e.user,a=e.myPlaylistCount;X.a.get("/user/my-playlist/delete/".concat(t._id),{headers:{Authorization:"Bearer ".concat(s.userToken)}}).then((function(e){W({title:"Th\xe0nh c\xf4ng!",message:e.data.success,type:"success"}),n.props.setMyPlaylistCount(a-1)})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}},n.filter=je((function(e){X.a.get("/search?q=".concat(e.target.value)).then((function(e){return n.props.setFilterResult(e.data[0])})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}),500),n.selectSong=function(e){var t=e.target.closest(".list-song__item.list-group-item").dataset.id,s=Object(se.a)(n.state.songs);-1===s.findIndex((function(e){return e._id===t}))&&X.a.get("/song/detail/".concat(t)).then((function(e){return s.push(e.data)})).then((function(){return n.setState({songs:s})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))},n.editPlaylist=function(){if(n.props.playlist){for(var e=n.editFormRef.current,t=[],s=0;s<e.length;s++)e[s].checked&&t.push(e[s].id);var a=n.props,r=a.user,c=a.playlist;X.a.post("/user/my-playlist/update/".concat(c._id),{songIds:t},{headers:{Authorization:"Bearer ".concat(r.userToken)}}).then((function(e){return n.setState({songs:e.data.song})})).then((function(){W({title:"Th\xe0nh c\xf4ng!",message:"\u0110\xe3 c\u1eadp nh\u1eadt playlist!",type:"success"}),n.setState({showEditModal:!1})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}},n.state={like:!1,showPlaylistModal:!1,showEditModal:!1,showDeleteModal:!1,listPlaylist:[],songs:[]},n.editFormRef=a.a.createRef(),n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.getLike(),this.props.playlist&&this.setState({songs:this.props.playlist.song})}},{key:"componentDidUpdate",value:function(e){e.likedSongCount===this.props.likedSongCount&&e.currentSongId===this.props.currentSongId||this.getLike()}},{key:"render",value:function(){var e=this,t=this.props.user.userId,s=this.state,n=s.like,r=s.listPlaylist,c=this.props.filterResult;return Object(me.jsxs)("div",{className:"options-list",children:[this.props.like?Object(me.jsxs)(ce.a.ItemText,{className:"options-list__item",onClick:this.like,children:[Object(me.jsx)("div",{className:"option-list__item--icon ".concat(t&&!0===n?"active":""),children:Object(me.jsx)(ee.a,{icon:te.m})}),Object(me.jsx)("span",{children:"Y\xeau th\xedch"})]}):"",this.props.addToPlaylist?Object(me.jsxs)(ce.a.Item,{className:"options-list__item",onClick:this.getPlaylist,children:[Object(me.jsx)("div",{className:"option-list__item--icon",children:Object(me.jsx)(ee.a,{icon:te.w})}),Object(me.jsx)("span",{children:"Th\xeam v\xe0o playlist"})]}):"",this.props.playNext?Object(me.jsxs)(ce.a.Item,{className:"options-list__item",onClick:this.playNext,children:[Object(me.jsx)("div",{className:"option-list__item--icon",children:Object(me.jsx)(ee.a,{icon:te.D})}),Object(me.jsx)("span",{children:"Ph\xe1t ti\u1ebfp theo"})]}):"",this.props.playLast?Object(me.jsxs)(ce.a.Item,{className:"options-list__item",onClick:this.playLast,children:[Object(me.jsx)("div",{className:"option-list__item--icon",children:Object(me.jsx)(ee.a,{icon:te.f})}),Object(me.jsx)("span",{children:"Th\xeam v\xe0o ch\u1edd ph\xe1t"})]}):"",this.props.remove?Object(me.jsxs)(ce.a.Item,{className:"options-list__item",onClick:this.remove,children:[Object(me.jsx)("div",{className:"option-list__item--icon",children:Object(me.jsx)(ee.a,{icon:te.E})}),Object(me.jsx)("span",{children:"X\xf3a"})]}):"","/user/my-playlist"===this.props.location.pathname&&this.props.editMyPlaylist?Object(me.jsxs)(ce.a.Item,{className:"options-list__item",onClick:function(){return e.setState({showEditModal:!0})},children:[Object(me.jsx)("div",{className:"option-list__item--icon",children:Object(me.jsx)(ee.a,{icon:te.h})}),Object(me.jsx)("span",{children:"Ch\u1ec9nh s\u1eeda"})]}):"","/user/my-playlist"===this.props.location.pathname&&this.props.deleteMyPlaylist?Object(me.jsxs)(ce.a.Item,{className:"options-list__item",onClick:function(){return e.setState({showDeleteModal:!0})},children:[Object(me.jsx)("div",{className:"option-list__item--icon",children:Object(me.jsx)(ee.a,{icon:te.E})}),Object(me.jsx)("span",{children:"X\xf3a playlist"})]}):"",this.props.info?Object(me.jsxs)(ce.a.Item,{className:"options-list__item",onClick:this.getInfo,children:[Object(me.jsx)("div",{className:"option-list__item--icon",children:Object(me.jsx)(ee.a,{icon:te.p})}),Object(me.jsx)("span",{children:"Chi ti\u1ebft"})]}):"",this.props.copyLink?Object(me.jsxs)(ce.a.ItemText,{className:"options-list__item",onClick:this.copyLink,children:[Object(me.jsx)("div",{className:"option-list__item--icon",children:Object(me.jsx)(ee.a,{icon:te.q})}),Object(me.jsx)("span",{children:"Sao ch\xe9p link"})]}):"",this.props.download?Object(me.jsxs)(ce.a.Item,{className:"options-list__item",onClick:this.download,children:[Object(me.jsx)("div",{className:"option-list__item--icon",children:Object(me.jsx)(ee.a,{icon:te.g})}),Object(me.jsx)("span",{children:"T\u1ea3i xu\u1ed1ng"})]}):"",Object(me.jsxs)(ie.a,{show:this.state.showPlaylistModal,onHide:function(){return e.setState({showPlaylistModal:!1})},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(me.jsx)(ie.a.Header,{closeButton:!0,className:"bg-light",children:Object(me.jsx)("h5",{className:"mb-0",children:"Ch\u1ecdn playlist mu\u1ed1n th\xeam!"})}),Object(me.jsxs)(ie.a.Body,{className:"playlist-modal-body bg-light",children:[Object(me.jsx)("div",{className:"list-playlist-modal",children:Object(me.jsx)("ul",{className:"list-group list-group-flush",children:0===r.length?Object(me.jsx)("span",{className:"text-center font-weight-light mt-5",children:Object(me.jsx)("i",{children:"B\u1ea1n ch\u01b0a c\xf3 playlist n\xe0o!"})}):r.map((function(t){return Object(me.jsx)("li",{className:"list-playlist-item list-group-item",onClick:function(){return e.addToPlaylist(t._id)},children:Object(me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(me.jsxs)("div",{children:[Object(me.jsx)("h6",{children:"".concat(t.title," (").concat(t.song.length,")")}),Object(me.jsx)("span",{children:"C\u1eadp nh\u1eadt: ".concat(de(t.updatedAt))})]}),Object(me.jsx)(ee.a,{icon:te.e})]})},t._id)}))})}),Object(me.jsx)("form",{onSubmit:this.createPlaylist,method:"POST",id:"create-playlist-form",children:Object(me.jsxs)("div",{className:"d-flex",children:[Object(me.jsx)("div",{className:"flex-grow-1",children:Object(me.jsx)("input",{name:"title",type:"text",placeholder:"Nh\u1eadp t\xean playlist c\u1ea7n t\u1ea1o!",className:"h-100 w-100 bg-light form-control",onFocus:function(){return window.removeEventListener("keydown",he)},onBlur:function(){return window.addEventListener("keydown",he)}})}),Object(me.jsx)("button",{className:"btn btn-info ml-2",children:"T\u1ea1o playlist"})]})})]})]}),Object(me.jsxs)(ie.a,{show:this.state.showEditModal,onHide:function(){return e.setState({showEditModal:!1})},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(me.jsx)(ie.a.Header,{closeButton:!0,className:"bg-light",children:Object(me.jsx)("h5",{className:"mb-0",children:"Ch\u1ec9nh s\u1eeda playlist"})}),Object(me.jsxs)(ie.a.Body,{className:"playlist-modal-body bg-light",children:[Object(me.jsxs)("div",{className:"m-3",children:[Object(me.jsx)("input",{type:"text",placeholder:"Nh\u1eadp t\xean b\xe0i h\xe1t...",className:"filter-input bg-light form-control",onChange:this.filter,onFocus:function(){return window.removeEventListener("keydown",he)},onBlur:function(t){e.props.setFilterResult([]),t.target.value="",window.addEventListener("keydown",he)}}),Object(me.jsx)("div",{className:"filter-suggest box-shadow",children:Object(me.jsx)("ul",{className:"list-group list-group-flush",children:0!==c.length?Object(me.jsx)(a.a.Fragment,{children:c.map((function(t){return Object(me.jsx)("li",{className:"list-song__item list-group-item",onMouseDown:e.selectSong,"data-id":t._id,children:Object(me.jsxs)("div",{className:"search-suggest__item",children:[Object(me.jsx)("div",{className:"search-suggest__item--img",style:{backgroundImage:"url(".concat(t.image,")")}}),Object(me.jsx)("p",{className:"search-suggest__item--info",children:t.title})]})},t._id)}))}):""})})]}),Object(me.jsxs)("div",{className:"m-3",children:[Object(me.jsx)("form",{ref:this.editFormRef,method:"POST",id:"edit-playlist-form",className:"list-playlist-modal mb-3 d-flex flex-column",children:this.props.playlist?Object(me.jsx)(a.a.Fragment,{children:this.state.songs.map((function(e){return Object(me.jsx)(oe.a.Check,{type:"checkbox",className:"pl-5 pr-5 pt-3",id:e._id,label:e.title,defaultChecked:!0},e._id)}))}):""}),Object(me.jsx)("button",{className:"form-submit mt-auto",onClick:this.editPlaylist,children:"L\u01b0u thay \u0111\u1ed5i"})]})]})]}),Object(me.jsxs)(ie.a,{show:this.state.showDeleteModal,onHide:function(){return e.setState({showDeleteModal:!1})},children:[Object(me.jsx)(ie.a.Header,{closeButton:!0,children:Object(me.jsx)(ie.a.Title,{children:"X\xe1c nh\u1eadn"})}),Object(me.jsx)(ie.a.Body,{children:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a playlist?"}),Object(me.jsxs)(ie.a.Footer,{children:[Object(me.jsx)(le.a,{variant:"secondary",onClick:function(){return e.setState({showDeleteModal:!1})},children:"Tr\u1edf l\u1ea1i"}),Object(me.jsx)(le.a,{variant:"danger",onClick:this.deleteMyPlaylist,children:"X\xf3a"})]})]})]})}}]),s}(n.Component),ge=Object(p.g)(be),Oe=Object(i.b)((function(e){return{currentIndex:e.player.currentIndex,listPlaying:e.player.listPlaying,user:e.user,likedSongCount:e.song.likedSongCount,myPlaylistCount:e.playlist.myPlaylistCount,filterResult:e.search.filterResult,currentSongId:e.player.currentSongId}}),(function(e){return{setCurrentIndex:function(t){return e(Q(t))},setListPlaying:function(t){return e($(t))},setLikedSongCount:function(t){return e(V(t))},setMyPlaylistCount:function(t){return e(re(t))},setFilterResult:function(t){return e(function(e){return{type:B,result:e}}(t))}}}))(ge),xe=s(126),fe=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(o.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).playAudio=function(){var t=[e.props.item];e.props.setListPlaying(t),e.props.setCurrentIndex(0)},e}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props,t=e.item,s=e.currentSongId;return Object(me.jsx)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 mt-3",children:Object(me.jsxs)("div",{className:"card border-0 h-100",children:[Object(me.jsxs)("div",{className:"card-img box-shadow rounded",children:[Object(me.jsx)(m.b,{to:"/song/detail/".concat(t._id),children:Object(me.jsx)("img",{src:t.image,className:"card-img-custom card-img-top",alt:"..."})}),t._id!==s?Object(me.jsxs)("div",{children:[Object(me.jsx)(xe.a,{className:"btn-ellipsis",id:"dropdown-options",drop:"left",title:Object(me.jsx)(ee.a,{icon:te.j}),children:Object(me.jsx)(Oe,{song:t,like:!0,addToPlaylist:!0,playNext:!0,playLast:!0,info:!0,copyLink:!0,download:!0})}),Object(me.jsx)("div",{className:"card-img__overlay",children:Object(me.jsx)("div",{className:"btn-toggle-play",onClick:this.playAudio,children:Object(me.jsx)(ee.a,{icon:te.v})})})]}):""]}),Object(me.jsxs)("div",{className:"card-body pl-0 pr-0",children:[Object(me.jsx)("h6",{className:"card-title",children:Object(me.jsx)(m.b,{to:"/song/detail/".concat(t._id),children:t.title})}),Object(me.jsx)("h6",{className:"card-artist",children:t.artist.map((function(e,t){return Object(me.jsxs)(m.b,{to:"/artist/detail/".concat(e._id),children:[t>0&&", ",e.name]},e._id)}))})]})]})})}}]),s}(n.Component),ye=Object(i.b)((function(e){return{currentSongId:e.player.currentSongId}}),(function(e){return{setListPlaying:function(t){return e($(t))},setCurrentIndex:function(t){return e(Q(t))},playAudio:function(){return e(J())}}}))(fe),ve=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).play=function(){var e=n.props.artistDetail.song;n.props.setListPlaying(e),n.props.setCurrentIndex(0),n.props.isRandom&&n.props.toggleRandom()},n.state={isLoading:!0},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;X.a.get("/artist/detail/".concat(t)).then((function(t){var s=Object(h.a)(Object(h.a)({},t.data[0]),{},{song:t.data[1]});e.props.setArtistDetail(s)})).then((function(){return e.setState({isLoading:!1})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}},{key:"render",value:function(){if(this.state.isLoading)return"";var e=this.props.artistDetail,t=e.name,s=e.image,n=e.area,r=e.song;return Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsxs)("div",{className:"row section text-center text-lg-left",children:[Object(me.jsx)("div",{className:"col-sm-6 text-center",children:Object(me.jsx)("img",{src:s,alt:"",className:"img-artist-detail box-shadow"})}),Object(me.jsxs)("div",{className:"col-sm-6 text-center",children:[Object(me.jsx)("h3",{className:"mt-5",children:t}),Object(me.jsxs)("p",{className:"mt-3",children:[Object(me.jsx)("b",{children:"Khu v\u1ef1c: "}),n.name]}),Object(me.jsxs)("button",{className:"detail-btn btn btn-danger mt-5 box-shadow",onClick:this.play,children:[Object(me.jsx)(ee.a,{icon:te.v}),Object(me.jsx)("span",{children:" PH\xc1T"})]})]})]}),Object(me.jsxs)("div",{className:"section",children:[Object(me.jsxs)("div",{className:"heading",children:[Object(me.jsxs)("div",{className:"d-flex align-items-end justify-content-between",children:[Object(me.jsx)("h4",{className:"mb-0 p-2 rounded bg-light box-shadow",children:"B\xe0i h\xe1t g\u1ea7n \u0111\xe2y"}),Object(me.jsxs)("p",{className:"p-2 rounded box-shadow",children:[r.length," b\xe0i h\xe1t"]})]}),Object(me.jsx)("hr",{})]}),Object(me.jsx)("div",{className:"row",children:r.map((function(e){return Object(me.jsx)(ye,{item:e},e._id)}))})]})]})}}]),s}(n.Component),Ne=Object(i.b)((function(e){return{artistDetail:e.artist.artistDetail}}),(function(e){return{setArtistDetail:function(t){return e(function(e){return{type:A,artist:e}}(t))},setListPlaying:function(t){return e($(t))},setCurrentIndex:function(t){return e(Q(t))},toggleRandom:function(){return e(Z())}}}))(ve),_e=s(130),ke=s(127),we=s(131),Se=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).handlePrev=function(){var e=n.state.active;n.setState({active:e-1},(function(){var e=n.props.history;e.push("".concat(e.location.pathname,"?").concat(n.state.query,"page=").concat(n.state.active))}))},n.handleNext=function(){var e=n.state.active;n.setState({active:e+1},(function(){var e=n.props.history;e.push("".concat(e.location.pathname,"?").concat(n.state.query,"page=").concat(n.state.active))}))},n.selectPage=function(e){var t=n.props.history;t.push("".concat(t.location.pathname,"?").concat(n.state.query,"page=").concat(e.target.innerText))},n.state={items:[],active:1,query:""},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.history.location.search,s=new URLSearchParams(t);s.get("q")&&this.setState({query:"q=".concat(s.get("q"),"&")});var n=Number(s.get("page"));n||(n=1),this.setState({active:n},(function(){for(var t=[],s=2;s<e.props.pageNums;s++)(s>=e.state.active-1&&s<=e.state.active+1||s<=4&&e.state.active<=2||s>=e.props.pageNums-3&&n>=e.props.pageNums-2)&&t.push(Object(me.jsx)(we.a.Item,{active:s===e.state.active,activeLabel:"",onClick:e.selectPage,children:s},s));e.setState({items:t})}))}},{key:"render",value:function(){var e=this,t=this.props.history,s=this.state.active,n=this.props.pageNums;return 1===n?"":Object(me.jsx)("div",{className:"d-flex justify-content-center mt-2",children:Object(me.jsxs)(we.a,{children:[Object(me.jsx)(we.a.Prev,{disabled:1===s,onClick:this.handlePrev}),Object(me.jsx)(we.a.Item,{active:1===s,activeLabel:"",onClick:this.selectPage,children:1},1),s<=3||n<=5?"":Object(me.jsx)(we.a.Ellipsis,{onClick:function(){return t.push("".concat(t.location.pathname,"?").concat(e.state.query,"page=").concat(e.state.active-2))}}),this.state.items,s>=n-2||n<=5?"":Object(me.jsx)(we.a.Ellipsis,{onClick:function(){return t.push("".concat(t.location.pathname,"?").concat(e.state.query,"page=").concat(e.state.active+2))}}),Object(me.jsx)(we.a.Item,{active:s===n,activeLabel:"",onClick:this.selectPage,children:n},n),Object(me.jsx)(we.a.Next,{disabled:this.state.active===this.props.pageNums,onClick:this.handleNext})]})})}}]),s}(n.Component),Ce=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.item;return Object(me.jsx)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 mt-3",children:Object(me.jsxs)("div",{className:"card border-0 h-100",children:[Object(me.jsx)("div",{className:"card-img box-shadow rounded-circle",children:Object(me.jsx)(m.b,{to:"/artist/detail/".concat(e._id),children:Object(me.jsx)("img",{src:e.image,className:"card-img-custom card-img-top rounded-circle",alt:"..."})})}),Object(me.jsx)("div",{className:"card-body pl-0 pr-0",children:Object(me.jsx)("h6",{className:"card-title text-center",children:Object(me.jsx)(m.b,{to:"/artist/detail/".concat(e._id),children:e.name})})})]})})}}]),s}(n.Component),Pe=Object(i.b)((function(e){return{}}),(function(e){return{}}))(Ce),Te=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(me.jsxs)("div",{className:"blank",children:[Object(me.jsx)(ee.a,{icon:te.b,className:"blank__icon"}),Object(me.jsx)("i",{className:"pl-2 pr-2",children:"Kh\xf4ng t\xecm th\u1ea5y k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p!"})]})}}]),s}(n.Component),Le=s(21),Ie=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={isLoading:!0,pageNums:null},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.areaId,s=this.props.history.location.search,n=new URLSearchParams(s);Promise.all([X.a.get("/artist/".concat(t,"?page=").concat(n.get("page"))),X.a.get("/artist/".concat(t,"/count"))]).then((function(t){var s=t[0].data,n=t[1].data;e.props.setArtistArea(s),e.setState({pageNums:Math.ceil(n/Le.NUMBER_OF_ITEM_PER_PAGE)})})).then((function(){return e.setState({isLoading:!1})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}},{key:"render",value:function(){if(this.state.isLoading||null===this.state.pageNums)return"";var e=this.props.artistArea;return 0===e.length?Object(me.jsx)(Te,{}):Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)("div",{className:"row",children:e.map((function(e){return Object(me.jsx)(Pe,{item:e},e._id)}))}),Object(me.jsx)(Se,{pageNums:this.state.pageNums,history:this.props.history})]})}}]),s}(n.Component),Re=Object(i.b)((function(e){return{artistArea:e.artist.artistArea}}),(function(e){return{setArtistArea:function(t){return e(function(e){return{type:E,artists:e}}(t))}}}))(Ie),Me=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.areas;return Object(me.jsx)(a.a.Fragment,{children:Object(me.jsx)(p.b,{path:"/artist/:areaId",children:function(t){var s=t.match,n=t.history,a=(s?s.params:{}).areaId;return Object(me.jsx)(_e.a,{activeKey:a,onSelect:function(e){return n.replace(e)},children:e.map((function(e){return Object(me.jsx)(ke.a,{eventKey:e._id,title:e.name,children:Object(me.jsx)("div",{className:"mt-4 mb-4",children:a===e._id?Object(me.jsx)(Re,{match:s,history:n}):""})},e._id)}))})}})})}}]),s}(n.Component),Ee=Object(i.b)((function(e){return{areas:e.area}}))(Me),Ae=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(o.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).pickSong=function(t){var s=t.target.closest(".list-song__item:not(.active)"),n=t.target.closest(".song-options");if(s&&!n){var a=Number(s.dataset.index);e.props.setCurrentIndex(a)}},e}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(e){e.currentIndex!==this.props.currentIndex&&document.querySelector(".list-song__item.active").scrollIntoView({behavior:"smooth",block:"center"})}},{key:"render",value:function(){var e=this,t=this.props.listPlaying;return Object(me.jsxs)("div",{className:"right-sidebar box-shadow",children:[Object(me.jsx)("div",{className:"right-sidebar__header",children:"Danh s\xe1ch ph\xe1t"}),Object(me.jsx)("div",{className:"right-sidebar__body",children:Object(me.jsx)("ul",{className:"list-group list-group-flush",onClick:function(t){return e.pickSong(t)},children:t.map((function(t,s){return Object(me.jsxs)("li",{className:"list-song__item list-group-item ".concat(s===e.props.currentIndex?"active":""),"data-index":s,children:[Object(me.jsxs)("div",{className:"song-inline",children:[Object(me.jsx)("div",{className:"song-inline__img",style:{backgroundImage:"url(".concat(t.image,")")}}),Object(me.jsxs)("div",{className:"song-inline__info",children:[Object(me.jsx)("p",{className:"song-inline__info--title",children:t.title}),Object(me.jsx)("p",{className:"song-inline__info--artist",children:t.artist.map((function(e,t){return Object(me.jsxs)("span",{children:[t>0&&", ",e.name]},e._id)}))})]})]}),Object(me.jsx)("div",{className:"song-options",children:Object(me.jsx)(xe.a,{id:"dropdown-options",drop:"left",title:Object(me.jsx)(ee.a,{icon:te.i}),children:Object(me.jsx)(Oe,{song:t,like:!0,addToPlaylist:!0,playNext:!0,playLast:!0,remove:!0,info:!0,copyLink:!0,download:!0})})})]},t._id)}))})})]})}}]),s}(n.Component),De=Object(i.b)((function(e){return{currentIndex:e.player.currentIndex}}),(function(e){return{setCurrentIndex:function(t){return e(Q(t))}}}))(Ae),Be=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).handleTogglePlay=function(){var e=n.audioRef.current;n.props.isPlaying?e.pause():e.play()},n.handlePlay=function(){var e=setInterval((function(){return n.setState({listenTime:n.state.listenTime+1})}),1e3);n.setState({timeCounter:e}),n.props.playAudio()},n.handlePause=function(){clearInterval(n.state.timeCounter),n.props.pauseAudio()},n.handleTimeUpdate=function(){var e=n.audioRef.current,t=0;e.duration&&(t=Math.ceil(e.currentTime/e.duration*100)),n.props.setCurrentTime(e.currentTime),n.props.setProgressPercent(t)},n.handleProgress=function(){var e=n.audioRef.current,t=n.progressRef.current,s=e.duration*t.value/100;e.currentTime=s},n.handleLoadedData=function(){var e=n.audioRef.current,t=n.props,s=t.listPlaying,a=t.currentIndex,r=t.historyListen;n.setState({listenTime:0}),clearInterval(n.state.timeCounter),n.props.setDuration(e.duration);var c=s[a]._id;n.props.setCurrentSongId(c);var i=Object(se.a)(r),o=i.findIndex((function(e){return e._id===c}));-1!==o&&i.splice(o,1),i.length>=24&&i.pop(),i.unshift(s[a]),n.props.setHistoryListen(i)},n.handlePrev=function(){var e,t=n.props.currentIndex;t>=1&&(e=t-1,n.props.setCurrentIndex(e))},n.handleNext=function(){var e,t=n.props,s=t.currentIndex,a=t.listPlaying,r=t.repeat;"none"===r&&s<a.length-1&&(e=s+1,n.props.setCurrentIndex(e)),"all"===r&&(e=(s+1)%a.length,n.props.setCurrentIndex(e))},n.handleRandom=function(){var e=n.props,t=e.isRandom,s=e.currentIndex,a=e.listPlaying,r=e.currentSongId;if(t){var c=n.state.originalListPlaying,i=c.findIndex((function(e){return e._id===r}));n.props.setCurrentIndex(i),n.props.setListPlaying(c)}else n.setState({originalListPlaying:a,originIndex:s},(function(){var e=Object(se.a)(a),t=a[s];e.splice(s,1),e.sort((function(){return Math.random()-.5})),e.unshift(t),n.props.setCurrentIndex(0),n.props.setListPlaying(e)}));n.props.toggleRandom()},n.handleVolume=function(e){var t=e.target.valueAsNumber;n.audioRef.current.volume=t,n.props.setVolume(t)},n.handleVolumeBtn=function(){var e=n.audioRef.current;0!==e.volume?(n.setState({prevVolume:e.volume}),e.volume=0):e.volume=n.state.prevVolume},n.handleEnded=function(){"one"===n.props.repeat?n.audioRef.current.play():n.handleNext()},n.state={listenTime:0,prevVolume:1,originalListPlaying:[]},n.audioRef=a.a.createRef(),n.progressRef=a.a.createRef(),n.wrapperRef=a.a.createRef(),n.rightSidebarRef=a.a.createRef(),n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.audioRef.current;this.props.pauseAudio(),null!==t&&(t.currentTime=this.props.currentTime,t.volume=this.props.volume),window.addEventListener("keydown",he),document.addEventListener("click",(function(t){e.wrapperRef.current&&!e.wrapperRef.current.contains(t.target)&&(e.rightSidebarRef.current.checked=!1)}))}},{key:"componentDidUpdate",value:function(e,t){var s=this.audioRef.current,n=this.props,a=n.currentSongId,r=n.listPlaying,c=n.volume,i=n.user;if(e.currentSongId!==a&&s.play(),e.volume!==c&&(s.volume=c),e.listPlaying.length&&e.listPlaying.length<r.length){var o=e.listPlaying.map((function(e){return e._id})),l=r.filter((function(e){return!o.includes(e._id)})),u=Object(se.a)(this.state.originalListPlaying).concat(l);this.setState({originalListPlaying:u})}if(e.listPlaying.length>r.length){var d=r.map((function(e){return e._id})),h=e.listPlaying.filter((function(e){return!d.includes(e._id)})),j=this.state.originalListPlaying.findIndex((function(e){return e._id===h[0]._id})),p=Object(se.a)(this.state.originalListPlaying);p.splice(j,1),this.setState({originalListPlaying:p})}t.listenTime!==this.state.listenTime&&15===this.state.listenTime&&(i.userToken&&X.a.get("/interaction/playing?user=".concat(i.userId,"&song=").concat(a),{headers:{Authorization:"Bearer ".concat(i.userToken)}}).catch(console.log),X.a.get("/song/".concat(a,"/playing/update")).catch(console.log))}},{key:"render",value:function(){var e=this;if(0===this.props.listPlaying.length)return"";var t=this.props,s=t.listPlaying,n=t.isPlaying,a=t.currentIndex,r=t.currentSongId,c=t.progressPercent,i=t.currentTime,o=t.duration,l=t.repeat,u=t.isRandom,d=t.volume,h=this.audioRef.current;return Object(me.jsxs)("div",{ref:this.wrapperRef,className:"player box-shadow",children:[Object(me.jsxs)("div",{className:"player__song",children:[Object(me.jsx)(m.b,{to:"/song/detail/".concat(r),children:Object(me.jsx)("div",{className:"player__song--img box-shadow ".concat(n?"spin":""),style:{backgroundImage:"url(".concat(s[a].image,")")}})}),Object(me.jsxs)("div",{className:"player__song--info d-none d-sm-block",children:[Object(me.jsx)("p",{className:"player-song-title",children:Object(me.jsx)(m.b,{to:"/song/detail/".concat(r),children:s[a].title})}),Object(me.jsx)("p",{className:"player-song-artist",children:s[a].artist.map((function(e,t){return Object(me.jsxs)(m.b,{to:"/artist/detail/".concat(e._id),children:[t>0&&", ",e.name]},e._id)}))})]})]}),Object(me.jsxs)("div",{className:"player__controls",children:[Object(me.jsxs)("div",{className:"control-wrapper",children:["none"===l?Object(me.jsx)("div",{className:"control__btn",onClick:function(){return e.props.setRepeat("one")},children:Object(me.jsx)(ee.a,{icon:te.z})}):"","one"===l?Object(me.jsxs)("div",{className:"control__btn active",onClick:function(){return e.props.setRepeat("all")},children:[Object(me.jsx)(ee.a,{icon:te.z}),Object(me.jsx)("span",{className:"repeat",children:"1"})]}):"","all"===l?Object(me.jsxs)("div",{className:"control__btn active",onClick:function(){return e.props.setRepeat("none")},children:[Object(me.jsx)(ee.a,{icon:te.z}),Object(me.jsx)("span",{className:"repeat",children:"all"})]}):"",0===a?Object(me.jsx)("div",{className:"control__btn disabled",children:Object(me.jsx)(ee.a,{icon:te.C})}):Object(me.jsx)("div",{className:"control__btn",onClick:this.handlePrev,children:Object(me.jsx)(ee.a,{icon:te.C})}),Object(me.jsx)("div",{className:"btn-toggle-play",onClick:this.handleTogglePlay,children:n?Object(me.jsx)(ee.a,{icon:te.u}):Object(me.jsx)(ee.a,{icon:te.v})}),Object(me.jsx)("div",{className:"control__btn",onClick:this.handleNext,children:Object(me.jsx)(ee.a,{icon:te.D})}),Object(me.jsx)("div",{className:"control__btn ".concat(u?"active":""),onClick:this.handleRandom,children:Object(me.jsx)(ee.a,{icon:te.y})})]}),Object(me.jsxs)("div",{className:"d-flex align-items-center",children:[Object(me.jsx)("audio",{id:"player-audio",ref:this.audioRef,src:s[a].url,onLoadedData:this.handleLoadedData,onPlay:this.handlePlay,onPause:this.handlePause,onTimeUpdate:this.handleTimeUpdate,onEnded:this.handleEnded,onVolumeChange:function(){return e.props.setVolume(h?h.volume:d)}}),Object(me.jsx)("div",{className:"progress-time",children:ue(i)}),Object(me.jsx)("input",{className:"progress",type:"range",ref:this.progressRef,value:c,step:1,min:0,max:100,onChange:this.handleProgress}),Object(me.jsx)("div",{className:"progress-time",children:ue(o)})]})]}),Object(me.jsxs)("div",{className:"player__options d-none d-md-flex",children:[Object(me.jsxs)("div",{className:"d-none d-lg-flex ml-3 mr-3",children:[Object(me.jsx)("div",{className:"control__btn",onClick:this.handleVolumeBtn,children:0===d?Object(me.jsx)(ee.a,{icon:te.H}):Object(me.jsx)(ee.a,{icon:te.I})}),Object(me.jsx)("div",{className:"d-flex align-items-center",children:Object(me.jsx)("input",{className:"volume",type:"range",min:0,max:1,step:.02,value:d,onChange:this.handleVolume})})]}),Object(me.jsx)(xe.a,{id:"dropdown-options",drop:"left",title:Object(me.jsx)(ee.a,{icon:te.j}),children:Object(me.jsx)(Oe,{song:s[a],like:!0,addToPlaylist:!0,info:!0,copyLink:!0,download:!0})}),Object(me.jsx)("input",{type:"checkbox",hidden:!0,className:"list-songs-input",id:"list-songs-checkbox",ref:this.rightSidebarRef}),Object(me.jsx)("label",{htmlFor:"list-songs-checkbox",className:"control__btn ml-2 mr-4",children:Object(me.jsx)(ee.a,{icon:te.t})}),Object(me.jsx)(De,{listPlaying:s})]})]})}}]),s}(n.Component),Fe=Object(i.b)((function(e){return{isPlaying:e.player.isPlaying,isRandom:e.player.isRandom,repeat:e.player.repeat,volume:e.player.volume,currentIndex:e.player.currentIndex,currentSongId:e.player.currentSongId,progressPercent:e.player.progressPercent,currentTime:e.player.currentTime,duration:e.player.duration,listPlaying:e.player.listPlaying,user:e.user,historyListen:e.song.historyListen}}),(function(e){return{playAudio:function(){return e(J())},pauseAudio:function(){return e({type:x})},setCurrentTime:function(t){return e(function(e){return{type:f,newTime:e}}(t))},setCurrentSongId:function(t){return e(function(e){return{type:g,currentSongId:e}}(t))},setProgressPercent:function(t){return e(function(e){return{type:y,newPercent:e}}(t))},setCurrentIndex:function(t){return e(Q(t))},setDuration:function(t){return e(function(e){return{type:N,newDuration:e}}(t))},setRepeat:function(t){return e(function(e){return{type:_,value:e}}(t))},toggleRandom:function(){return e(Z())},setVolume:function(t){return e(function(e){return{type:w,newVolume:e}}(t))},setListPlaying:function(t){return e($(t))},setHistoryListen:function(t){return e(function(e){return{type:G,songs:e}}(t))}}}))(Be),qe=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(me.jsx)("div",{className:"loading",children:Object(me.jsxs)("div",{className:"loader",children:[Object(me.jsxs)("div",{className:"eq",children:[Object(me.jsx)("span",{className:"eq-bar eq-bar--1"}),Object(me.jsx)("span",{className:"eq-bar eq-bar--2"}),Object(me.jsx)("span",{className:"eq-bar eq-bar--3"}),Object(me.jsx)("span",{className:"eq-bar eq-bar--4"}),Object(me.jsx)("span",{className:"eq-bar eq-bar--5"}),Object(me.jsx)("span",{className:"eq-bar eq-bar--6"})]}),Object(me.jsx)("span",{className:"loader__text",children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u"})]})})}}]),s}(n.Component),Ue=s(132),Ge=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(o.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).playAudio=function(t){var s=t.target.closest(".list-song-inline__item"),n=t.target.closest(".song-options"),a=t.target.closest("#song-title"),r=t.target.closest("#song-artist");if(s&&!a&&!r&&!n){var c=Number(s.dataset.index),i=[e.props.item[c]];e.props.setListPlaying(i),e.props.setCurrentIndex(0)}},e}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=this.props.item;return Object(me.jsx)(Ue.a,{children:t.map((function(t,s){return Object(me.jsx)(Ue.a.Item,{className:"list-song-inline__item mb-1 border-0 bg-light",onClick:e.playAudio,"data-index":s,children:Object(me.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(me.jsxs)("div",{className:"song-inline",children:[Object(me.jsx)("div",{className:"ml-2 mr-4 text-primary",children:s+1}),Object(me.jsx)("div",{className:"song-inline__img",style:{backgroundImage:"url(".concat(t.image,")")}}),Object(me.jsxs)("div",{className:"list-song-inline__info",children:[Object(me.jsx)("h6",{className:"list-song-inline__info--title",children:Object(me.jsx)(m.b,{id:"song-title",to:"/song/detail/".concat(t._id),children:t.title})}),Object(me.jsx)("h6",{className:"list-song-inline__info--artist",children:t.artist.map((function(e,t){return Object(me.jsxs)(m.b,{id:"song-artist",to:"/artist/detail/".concat(e._id),children:[t>0&&", ",e.name]},e._id)}))})]})]}),Object(me.jsxs)("div",{className:"d-flex align-items-center",children:[Object(me.jsx)(ee.a,{icon:te.l}),Object(me.jsx)("div",{className:"ml-2 pt-1",children:"".concat(Number(t.chartcount/1e3).toFixed(2),"K")}),Object(me.jsx)("div",{className:"song-options",children:Object(me.jsx)(xe.a,{id:"dropdown-options",drop:"left",title:Object(me.jsx)(ee.a,{icon:te.j}),children:Object(me.jsx)(Oe,{song:t,like:!0,addToPlaylist:!0,playNext:!0,playLast:!0,info:!0,copyLink:!0,download:!0})})})]})]})},t._id)}))})}}]),s}(n.Component),Ke=Object(i.b)((function(e){return{currentSongId:e.player.currentSongId}}),(function(e){return{setListPlaying:function(t){return e($(t))},setCurrentIndex:function(t){return e(Q(t))},playAudio:function(){return e(J())}}}))(Ge),He=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).handleSelect=function(e){switch(e){case"vpop":n.setState({tab:0});break;case"usuk":n.setState({tab:1});break;case"kpop":n.setState({tab:2})}},n.playAll=function(){var e=n.props.chart[n.state.tab];n.props.setListPlaying(e),n.props.setCurrentIndex(0),n.props.isRandom&&n.props.toggleRandom()},n.state={tab:0},n}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=this.props.chart;return Object(me.jsxs)("div",{className:"section",children:[Object(me.jsxs)("div",{className:"heading",children:[Object(me.jsxs)("div",{className:"d-flex align-items-end justify-content-between",children:[Object(me.jsx)("h4",{className:"mb-0 p-2 rounded bg-light box-shadow",children:"B\u1ea3ng x\u1ebfp h\u1ea1ng tu\u1ea7n"}),Object(me.jsxs)("button",{className:"btn btn-danger box-shadow",onClick:this.playAll,children:[Object(me.jsx)(ee.a,{icon:te.v}),Object(me.jsx)("span",{children:" PH\xc1T T\u1ea4T C\u1ea2"})]})]}),Object(me.jsx)("hr",{})]}),Object(me.jsxs)(_e.a,{defaultActiveKey:"vpop",onSelect:function(t){return e.handleSelect(t)},children:[Object(me.jsx)(ke.a,{eventKey:"vpop",title:"Vi\u1ec7t Nam",children:Object(me.jsx)("div",{className:"mt-4 mb-4",children:Object(me.jsx)(Ke,{item:t[0]})})},"vpop"),Object(me.jsx)(ke.a,{eventKey:"usuk",title:"\xc2u M\u1ef9",children:Object(me.jsx)("div",{className:"mt-4 mb-4",children:Object(me.jsx)(Ke,{item:t[1]})})},"usuk"),Object(me.jsx)(ke.a,{eventKey:"kpop",title:"H\xe0n Qu\u1ed1c",children:Object(me.jsx)("div",{className:"mt-4 mb-4",children:Object(me.jsx)(Ke,{item:t[2]})})},"kpop")]})]})}}]),s}(n.Component),Ve=Object(i.b)((function(e){return{isRandom:e.player.isRandom,chart:e.song.chart}}),(function(e){return{setListPlaying:function(t){return e($(t))},setCurrentIndex:function(t){return e(Q(t))},toggleRandom:function(){return e(Z())}}}))(He),ze=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(o.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).playAll=function(){var t=e.props.recommendation;e.props.setListPlaying(t),e.props.setCurrentIndex(0),e.props.isRandom&&e.props.toggleRandom()},e}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.recommendation;return e?Object(me.jsxs)("div",{className:"section",children:[Object(me.jsxs)("div",{className:"heading",children:[Object(me.jsxs)("div",{className:"d-flex align-items-end justify-content-between",children:[Object(me.jsx)("h4",{className:"mb-0 p-2 rounded bg-light box-shadow",children:"G\u1ee3i \xfd cho b\u1ea1n"}),Object(me.jsxs)("button",{className:"btn btn-danger box-shadow",onClick:this.playAll,children:[Object(me.jsx)(ee.a,{icon:te.v}),Object(me.jsx)("span",{children:" PH\xc1T T\u1ea4T C\u1ea2"})]})]}),Object(me.jsx)("hr",{})]}),Object(me.jsx)("div",{className:"row",children:e.map((function(e){return Object(me.jsx)(ye,{item:e},e._id)}))})]}):Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)("p",{className:"mt-5 pt-3 mb-5 text-danger text-center",children:"D\u1eef li\u1ec7u nghe nh\u1ea1c c\u1ee7a b\u1ea1n ch\u01b0a \u0111\u1ee7 \u0111\u1ec3 s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y, ti\u1ebfp t\u1ee5c nghe nh\u1ea1c \u0111\u1ec3 ch\xfang t\xf4i c\xf3 th\u1ec3 hi\u1ec3u b\u1ea1n nhi\u1ec1u h\u01a1n!"}),Object(me.jsx)(Ve,{})]})}}]),s}(n.Component),Ye=Object(i.b)((function(e){return{recommendation:e.song.recommendation,isPlaying:e.player.isPlaying,isRandom:e.player.isRandom}}),(function(e){return{setListPlaying:function(t){return e($(t))},setCurrentIndex:function(t){return e(Q(t))},toggleRandom:function(){return e(Z())}}}))(ze),Xe=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props,t=e.user,s=e.recommendation;return Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)(Ve,{}),t.userToken&&s?Object(me.jsx)(Ye,{}):""]})}}]),s}(n.Component),Je=Object(i.b)((function(e){return{user:e.user,recommendation:e.song.recommendation}}))(Xe),Qe=function(e){return{type:b,user:e}},Ze=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).slideOff=function(){var e=n.arrowRef.current;e.offsetParent&&e.click()},n.arrowRef=a.a.createRef(),n}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props,t=e.areas,s=e.userToken,n=e.location,r=t.map((function(e){return e._id}));return Object(me.jsxs)("div",{className:"sidebar translate-on-md",children:[Object(me.jsxs)("div",{className:"sidebar__header",children:[Object(me.jsx)("div",{children:Object(me.jsx)(m.b,{to:"/",onClick:this.slideOff,children:Object(me.jsx)("img",{src:"/images/logos/logo.svg",alt:"logo-app"})})}),Object(me.jsx)("label",{htmlFor:"sidebar-checkbox",className:"sidebar__header--arrow d-xl-none",ref:this.arrowRef,children:Object(me.jsx)(ee.a,{icon:te.a})})]}),Object(me.jsx)("nav",{className:"sidebar__nav",children:Object(me.jsxs)("ul",{className:"list-group",children:[Object(me.jsx)("li",{className:"sidebar__nav--header",children:"Music RS"}),Object(me.jsx)("li",{onClick:this.slideOff,children:Object(me.jsxs)(m.c,{exact:!0,to:"/",className:"sidebar__nav--link",activeClassName:"active",children:[Object(me.jsx)(ee.a,{icon:te.o,className:"sidebar-icon"}),Object(me.jsx)("span",{children:"Trang ch\u1ee7"})]})}),Object(me.jsx)("li",{className:"sidebar__nav--header",children:"Kh\xe1m ph\xe1"}),Object(me.jsx)("li",{onClick:this.slideOff,children:Object(me.jsx)(p.b,{path:"/:slug/:area",children:function(e){var s=e.match,n=(s?s.params:{}).slug,a=(s?s.params:{}).area;return Object(me.jsxs)(m.c,{to:"/song/".concat(t[0]._id,"/").concat(t[0].category[0]._id),isActive:function(){return"song"===n&&r.includes(a)},className:"sidebar__nav--link",activeClassName:"active",children:[Object(me.jsx)(ee.a,{icon:te.t,className:"sidebar-icon"}),Object(me.jsx)("span",{children:"B\xe0i h\xe1t"})]})}})}),Object(me.jsx)("li",{onClick:this.slideOff,children:Object(me.jsx)(p.b,{path:"/:slug/:area",children:function(e){var s=e.match,n=(s?s.params:{}).slug,a=(s?s.params:{}).area;return Object(me.jsxs)(m.c,{to:"/playlist/".concat(t[0]._id),isActive:function(){return"playlist"===n&&r.includes(a)},className:"sidebar__nav--link",activeClassName:"active",children:[Object(me.jsx)(ee.a,{icon:te.f,className:"sidebar-icon"}),Object(me.jsx)("span",{children:"Playlist"})]})}})}),Object(me.jsx)("li",{onClick:this.slideOff,children:Object(me.jsx)(p.b,{path:"/:slug/:area",children:function(e){var s=e.match,n=(s?s.params:{}).slug,a=(s?s.params:{}).area;return Object(me.jsxs)(m.c,{to:"/artist/".concat(t[0]._id),isActive:function(){return"artist"===n&&r.includes(a)},className:"sidebar__nav--link",activeClassName:"active",children:[Object(me.jsx)(ee.a,{icon:te.s,className:"sidebar-icon"}),Object(me.jsx)("span",{children:"Ngh\u1ec7 s\u0129"})]})}})}),s?Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)("li",{className:"sidebar__nav--header",children:"C\xe1 nh\xe2n"}),Object(me.jsx)("li",{onClick:this.slideOff,children:Object(me.jsxs)(m.c,{exact:!0,to:"/user/recommend",className:"sidebar__nav--link",activeClassName:"active",children:[Object(me.jsx)(ee.a,{icon:te.k,className:"sidebar-icon"}),Object(me.jsx)("span",{children:"G\u1ee3i \xfd cho b\u1ea1n"})]})}),Object(me.jsx)("li",{onClick:this.slideOff,children:Object(me.jsxs)(m.c,{exact:!0,to:"/user/liked-song",className:"sidebar__nav--link",activeClassName:"active",children:[Object(me.jsx)(ee.a,{icon:te.m,className:"sidebar-icon"}),Object(me.jsx)("span",{children:"B\xe0i h\xe1t y\xeau th\xedch"})]})}),Object(me.jsx)("li",{onClick:this.slideOff,children:Object(me.jsxs)(m.c,{exact:!0,to:"/user/my-playlist",className:"sidebar__nav--link",activeClassName:"active",children:[Object(me.jsx)(ee.a,{icon:te.r,className:"sidebar-icon"}),Object(me.jsx)("span",{children:"Playlist c\u1ee7a t\xf4i"})]})}),Object(me.jsx)("li",{onClick:this.slideOff,children:Object(me.jsxs)(m.c,{exact:!0,to:"/user/history",className:"sidebar__nav--link",activeClassName:"active",children:[Object(me.jsx)(ee.a,{icon:te.n,className:"sidebar-icon"}),Object(me.jsx)("span",{children:"L\u1ecbch s\u1eed"})]})})]}):Object(me.jsxs)("div",{className:"sidebar__footer box-shadow",children:[Object(me.jsx)("p",{className:"text-center mb-2",children:"\u0110\u0103ng nh\u1eadp \u0111\u1ec3 c\xf3 tr\u1ea3i nghi\u1ec7m t\u1ed1t h\u01a1n t\u1ea1i MusicRS!"}),Object(me.jsx)(m.b,{to:{pathname:"/login",state:{prevPath:n.pathname}},className:"btn btn-block btn-danger",children:Object(me.jsx)("span",{children:"\u0110\u0103ng nh\u1eadp"})})]})]})})]})}}]),s}(n.Component),$e=Object(p.g)(Ze),We=Object(i.b)((function(e){return{areas:e.area,userToken:e.user.userToken}}))($e);function et(e){var t=function(e,t){for(;e.parentElement;){if(e.parentElement.matches(t))return e.parentElement;e=e.parentElement}},s={},n=document.querySelector(e.form);n&&(n.onsubmit=function(t){t.preventDefault();var s=!0;if(e.rules.forEach((function(e){var t=n.querySelector(e.selector);a(t,e)||(s=!1)})),s)if("function"===typeof e.onSubmit){var r=n.querySelectorAll("[name]"),c=Array.from(r).reduce((function(e,t){switch(t.type){case"radio":e[t.name]=n.querySelector('input[name="'.concat(t.name,'"]:checked')).value;break;case"checkbox":if(!t.matches(":checked"))return e[t.name]="",e;Array.isArray(e[t.name])||(e[t.name]=[]),e[t.name].push(t.value);break;case"file":e[t.name]=t.files;break;default:e[t.name]=t.value}return e}),{});e.onSubmit(c)}else n.submit()},e.rules.forEach((function(r){Array.isArray(s[r.selector])?s[r.selector].push(r.test):s[r.selector]=[r.test];var c=n.querySelectorAll(r.selector);Array.from(c).forEach((function(s){s.onblur=function(){a(s,r)},s.oninput=function(){t(s,e.formGroupSelector).querySelector(e.errorSelector).innerText="",t(s,e.formGroupSelector).classList.remove("invalid")}}))})));var a=function(a,r){for(var c,i=t(a,e.formGroupSelector).querySelector(e.errorSelector),o=s[r.selector],l=0;l<o.length;++l){switch(a.type){case"radio":case"checkbox":c=o[l](n.querySelector(r.selector+":checked"));break;default:c=o[l](a.value)}if(c)break}return c?(i.innerText=c,t(a,e.formGroupSelector).classList.add("invalid")):(i.innerText="",t(a,e.formGroupSelector).classList.remove("invalid")),!c}}et.isRequired=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Vui l\xf2ng nh\u1eadp tr\u01b0\u1eddng n\xe0y!";return{selector:e,test:function(e){return e?void 0:t}}},et.isEmail=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Vui l\xf2ng nh\u1eadp email ch\xednh x\xe1c!";return{selector:e,test:function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)?void 0:t}}},et.minLength=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Vui l\xf2ng nh\u1eadp t\u1ed1i thi\u1ec3u ".concat(t," k\xed t\u1ef1!");return{selector:e,test:function(e){return e.trim().length>=t?void 0:s}}},et.isConfirmed=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Nh\u1eadp l\u1ea1i kh\xf4ng tr\xf9ng kh\u1edbp!";return{selector:e,test:function(e){return e===t()?void 0:s}}};var tt=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).checkExisted=function(e){var t={};t[e.target.name]=e.target.value,X.a.post("/user/register/existed",t).then((function(e){var t=e.data;"username"===t.field&&n.setState({usernameMessage:t.message}),"email"===t.field&&n.setState({emailMessage:t.message})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))},n.suggest=je((function(e){X.a.get("/search?q=".concat(e.target.value)).then((function(e){var t=e.data;n.props.setSuggestion(t)})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}),500),n.handleSelect=function(e){var t=n.searchRef.current,s=e.target.closest(".list-song__item.list-group-item").dataset,a=s.type,r=s.id;n.props.history.push("/".concat(a,"/detail/").concat(r)),t.blur()},n.search=function(){var e=n.searchRef.current;n.props.history.push("/search/song?q=".concat(e.value)),e.blur()},n.onEnter=function(e){"Enter"===e.key&&n.search()},n.logout=function(){n.props.setCurrentUser(null),n.props.setRecommendation(null),n.props.setLikedSongCount(null),n.props.setMyPlaylist(null),n.props.setMyPlaylistCount(null),n.setState({showLogoutModal:!1}),n.props.history.push("/"),W({title:"Th\xe0nh c\xf4ng!",message:"B\u1ea1n \u0111\xe3 \u0111\u0103ng xu\u1ea5t kh\u1ecfi h\u1ec7 th\u1ed1ng!",type:"success"})},n.state={showLogoutModal:!1,showProfileModal:!1,usernameMessage:"",emailMessage:"",passwordMessage:"",update:!1},n.searchRef=a.a.createRef(),n}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(e,t){var s=this;t.showProfileModal!==this.state.showProfileModal&!this.state.showProfileModal&&this.setState({update:!1}),t.update!==this.state.update&&this.state.update&&et({form:"#update-profile-form",formGroupSelector:".form-group",errorSelector:".form-message",rules:[et.isRequired("#username"),et.isRequired("#email"),et.isRequired("#password"),et.minLength("#username",4),et.isEmail("#email"),et.minLength("#password",6)],onSubmit:function(e){if(!s.state.usernameMessage&&!s.state.emailMessage){var t=s.props.user;X.a.post("/user/".concat(t.userId,"/update-profile/"),e,{headers:{Authorization:"Bearer ".concat(t.userToken)}}).then((function(e){var t=e.data;s.props.setCurrentUser(t),s.setState({showProfileModal:!1}),W({title:"Th\xe0nh c\xf4ng!",message:"C\u1eadp nh\u1eadt t\xe0i kho\u1ea3n th\xe0nh c\xf4ng!",type:"success"})})).catch((function(e){var t=e.response.data;"password"===t.field&&s.setState({passwordMessage:t.message}),W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}}})}},{key:"render",value:function(){var e=this,t=this.props,s=t.user,n=t.suggestion,r=t.location;return Object(me.jsxs)("div",{className:"header",children:[Object(me.jsxs)("div",{className:"header__content",children:[Object(me.jsx)("label",{htmlFor:"sidebar-checkbox",className:"header__content--sidebar-icon",children:Object(me.jsx)(ee.a,{icon:te.c})}),Object(me.jsx)("input",{type:"checkbox",hidden:!0,className:"sidebar-input",id:"sidebar-checkbox"}),Object(me.jsx)("label",{htmlFor:"sidebar-checkbox",className:"overlay"}),Object(me.jsx)(We,{}),Object(me.jsxs)("div",{className:"header__content--search box-shadow",children:[Object(me.jsx)("button",{className:"search-icon",onClick:this.search,children:Object(me.jsx)(ee.a,{icon:te.A})}),Object(me.jsx)("input",{type:"text",className:"search-input",placeholder:"T\xecm ki\u1ebfm...",onChange:this.suggest,ref:this.searchRef,onKeyPress:this.onEnter,onFocus:function(){return window.removeEventListener("keydown",he)},onBlur:function(){return window.addEventListener("keydown",he)}}),Object(me.jsx)("div",{className:"search-suggest box-shadow",children:Object(me.jsxs)("ul",{className:"list-group list-group-flush",children:[n[0]&&n[0].length?Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)("li",{className:"search-suggest__header",children:"B\xe0i h\xe1t"}),n[0].map((function(t){return Object(me.jsx)("li",{className:"list-song__item list-group-item",onMouseDown:e.handleSelect,"data-id":t._id,"data-type":"song",children:Object(me.jsxs)("div",{className:"search-suggest__item",children:[Object(me.jsx)("div",{className:"search-suggest__item--img",style:{backgroundImage:"url(".concat(t.image,")")}}),Object(me.jsx)("p",{className:"search-suggest__item--info",children:t.title})]})},t._id)}))]}):"",n[1]&&n[1].length?Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)("li",{className:"search-suggest__header",children:"Playlist"}),n[1].map((function(t){return Object(me.jsx)("li",{className:"list-song__item list-group-item",onMouseDown:e.handleSelect,"data-id":t._id,"data-type":"playlist",children:Object(me.jsxs)("div",{className:"search-suggest__item",children:[Object(me.jsx)("div",{className:"search-suggest__item--img",style:{backgroundImage:"url(".concat(t.image,")")}}),Object(me.jsx)("p",{className:"search-suggest__item--info",children:t.title})]})},t._id)}))]}):"",n[2]&&n[2].length?Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)("li",{className:"search-suggest__header",children:"Ngh\u1ec7 s\u1ef9"}),n[2].map((function(t){return Object(me.jsx)("li",{className:"list-song__item list-group-item",onMouseDown:e.handleSelect,"data-id":t._id,"data-type":"artist",children:Object(me.jsxs)("div",{className:"search-suggest__item",children:[Object(me.jsx)("div",{className:"search-suggest__item--img rounded-circle",style:{backgroundImage:"url(".concat(t.image,")")}}),Object(me.jsx)("p",{className:"search-suggest__item--info",children:t.name})]})},t._id)}))]}):""]})})]}),Object(me.jsx)("div",{className:"header__content--auth",children:s.userToken?Object(me.jsxs)(xe.a,{id:"dropdown-auth",title:Object(me.jsxs)("div",{className:"auth-link",children:[Object(me.jsx)(ee.a,{icon:te.G,className:"user-circle-icon"}),Object(me.jsx)("span",{className:"ml-2 d-none d-xl-block",children:s.username})]}),children:[Object(me.jsxs)(ce.a.Item,{className:"options-list__item",onClick:function(){return e.setState({showProfileModal:!0})},children:[Object(me.jsx)("div",{className:"option-list__item--icon",children:Object(me.jsx)(ee.a,{icon:te.F})}),Object(me.jsx)("span",{children:"Th\xf4ng tin"})]}),Object(me.jsxs)(ce.a.Item,{className:"options-list__item",onClick:function(){return e.setState({showLogoutModal:!0})},children:[Object(me.jsx)("div",{className:"option-list__item--icon",children:Object(me.jsx)(ee.a,{icon:te.B})}),Object(me.jsx)("span",{children:"\u0110\u0103ng xu\u1ea5t"})]})]}):Object(me.jsxs)(m.b,{to:{pathname:"/login",state:{prevPath:r.pathname}},className:"auth-link",children:[Object(me.jsx)(ee.a,{icon:te.G,className:"user-circle-icon"}),Object(me.jsx)("span",{className:"ml-2 d-none d-xl-block",children:"\u0110\u0103ng nh\u1eadp"})]})})]}),Object(me.jsx)("div",{className:"header__banner"}),Object(me.jsxs)(ie.a,{show:this.state.showProfileModal,onHide:function(){return e.setState({showProfileModal:!1})},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(me.jsx)(ie.a.Header,{closeButton:!0,className:"bg-light",children:Object(me.jsx)(ie.a.Title,{children:"Th\xf4ng tin c\xe1 nh\xe2n"})}),Object(me.jsx)(ie.a.Body,{className:"bg-light",children:this.state.update?Object(me.jsxs)("form",{action:"true",method:"POST",id:"update-profile-form",children:[Object(me.jsxs)("div",{className:"form-group ".concat(this.state.usernameMessage?"api-invalid":""),children:[Object(me.jsx)("label",{htmlFor:"username",className:"form-label",children:"T\xean \u0111\u0103ng nh\u1eadp"}),Object(me.jsx)("input",{autoFocus:!0,defaultValue:s.username,id:"username",name:"username",type:"text",className:"form-control",onBlur:function(t){t.target.value!==s.username&&e.checkExisted(t)},onInput:function(){return e.setState({usernameMessage:""})}}),Object(me.jsx)("span",{className:"form-message"}),Object(me.jsx)("span",{className:"api-message",children:this.state.usernameMessage})]}),Object(me.jsxs)("div",{className:"form-group ".concat(this.state.emailMessage?"api-invalid":""),children:[Object(me.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),Object(me.jsx)("input",{defaultValue:s.email,id:"email",name:"email",type:"text",className:"form-control",onBlur:function(t){t.target.value!==s.email&&e.checkExisted(t)},onInput:function(){return e.setState({emailMessage:""})}}),Object(me.jsx)("span",{className:"form-message"}),Object(me.jsx)("span",{className:"api-message",children:this.state.emailMessage})]}),Object(me.jsxs)("div",{className:"form-group ".concat(this.state.passwordMessage?"api-invalid":""),children:[Object(me.jsx)("label",{htmlFor:"password",className:"form-label",children:"M\u1eadt kh\u1ea9u"}),Object(me.jsx)("input",{autoComplete:"new-password",id:"password",name:"password",type:"password",placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u \u0111\u1ec3 x\xe1c nh\u1eadn",className:"form-control",onChange:function(){return e.setState({passwordMessage:""})}}),Object(me.jsx)("span",{className:"form-message"}),Object(me.jsx)("span",{className:"api-message",children:this.state.passwordMessage})]}),Object(me.jsx)("button",{className:"form-submit",children:"L\u01b0u thay \u0111\u1ed5i"})]}):Object(me.jsxs)("div",{children:[Object(me.jsx)("table",{className:"table table-borderless",children:Object(me.jsxs)("tbody",{children:[Object(me.jsxs)("tr",{children:[Object(me.jsx)("th",{scope:"row",children:"T\xean \u0111\u0103ng nh\u1eadp:"}),Object(me.jsx)("td",{children:s.username})]}),Object(me.jsxs)("tr",{children:[Object(me.jsx)("th",{scope:"row",children:"Email:"}),Object(me.jsx)("td",{children:s.email})]})]})}),Object(me.jsx)("button",{className:"form-submit",onClick:function(){return e.setState({update:!0})},children:"C\u1eadp nh\u1eadt"})]})})]}),Object(me.jsxs)(ie.a,{show:this.state.showLogoutModal,onHide:function(){return e.setState({showLogoutModal:!1})},children:[Object(me.jsx)(ie.a.Header,{closeButton:!0,children:Object(me.jsx)(ie.a.Title,{children:"\u0110\u0103ng xu\u1ea5t"})}),Object(me.jsx)(ie.a.Body,{children:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n \u0111\u0103ng xu\u1ea5t?"}),Object(me.jsxs)(ie.a.Footer,{children:[Object(me.jsx)(le.a,{variant:"secondary",onClick:function(){return e.setState({showLogoutModal:!1})},children:"Tr\u1edf l\u1ea1i"}),Object(me.jsx)(le.a,{variant:"danger",onClick:this.logout,children:"\u0110\u0103ng xu\u1ea5t"})]})]})]})}}]),s}(n.Component),st=Object(p.g)(tt),nt=Object(i.b)((function(e){return{user:e.user,suggestion:e.search.suggestion}}),(function(e){return{setCurrentUser:function(t){return e(Qe(t))},setSuggestion:function(t){return e(function(e){return{type:D,suggestion:e}}(t))},setLikedSongCount:function(t){return e(V(t))},setMyPlaylist:function(t){return e(ae(t))},setMyPlaylistCount:function(t){return e(re(t))},setRecommendation:function(t){return e(z(t))}}}))(st),at=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).playPlaylist=function(){var e=n.props.playlistDetail.song;n.props.setListPlaying(e),n.props.setCurrentIndex(0),n.props.isRandom&&n.props.toggleRandom()},n.state={isLoading:!0},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;X.a.get("/playlist/detail/".concat(t)).then((function(t){return e.props.setPlaylistDetail(t.data)})).then((function(){return e.setState({isLoading:!1})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}},{key:"render",value:function(){if(this.state.isLoading)return"";var e=this.props.playlistDetail,t=e.title,s=e.own,n=e.image,r=e.song,c=e.area;return Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsxs)("div",{className:"row section text-center text-lg-left",children:[Object(me.jsx)("div",{className:"col-xl-3 col-lg-4 col-sm-5",children:Object(me.jsx)("img",{src:n,alt:"",className:"img-detail box-shadow"})}),Object(me.jsx)("div",{className:"col-xl-9 col-lg-8 col-sm-7",children:Object(me.jsxs)("div",{className:"row pt-5",children:[Object(me.jsxs)("div",{className:"col-lg-8",children:[Object(me.jsx)("h3",{children:t}),Object(me.jsxs)("p",{children:[Object(me.jsx)("b",{children:"T\u1ea1o b\u1edfi: "}),s.username]}),c?Object(me.jsxs)("p",{children:[Object(me.jsx)("b",{children:"Khu v\u1ef1c: "}),c.name]}):""]}),Object(me.jsxs)("div",{className:"col-lg-4 d-flex flex-column align-items-center",children:[Object(me.jsxs)("button",{className:"detail-btn btn btn-danger box-shadow",onClick:this.playPlaylist,children:[Object(me.jsx)(ee.a,{icon:te.v}),Object(me.jsx)("span",{children:" PH\xc1T"})]}),Object(me.jsx)(xe.a,{className:"box-shadow",id:"detail-dropdown-options",drop:"left",title:Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)(ee.a,{icon:te.d}),Object(me.jsx)("span",{children:" L\u1ef0A CH\u1eccN"})]}),children:Object(me.jsx)(Oe,{song:this.props.songDetail,copyLink:!0})})]})]})})]}),Object(me.jsxs)("div",{className:"section",children:[Object(me.jsxs)("div",{className:"heading",children:[Object(me.jsxs)("div",{className:"d-flex align-items-end justify-content-between",children:[Object(me.jsx)("h4",{className:"mb-0 p-2 rounded bg-light box-shadow",children:"Danh s\xe1ch b\xe0i h\xe1t"}),Object(me.jsxs)("p",{className:"p-2 rounded box-shadow",children:[r.length," b\xe0i h\xe1t"]})]}),Object(me.jsx)("hr",{})]}),Object(me.jsx)("div",{className:"row",children:r.map((function(e){return Object(me.jsx)(ye,{item:e},e._id)}))})]})]})}}]),s}(n.Component),rt=Object(i.b)((function(e){return{playlistDetail:e.playlist.playlistDetail,isPlaying:e.player.isPlaying,isRandom:e.player.isRandom}}),(function(e){return{setPlaylistDetail:function(t){return e(function(e){return{type:M,playlist:e}}(t))},setListPlaying:function(t){return e($(t))},setCurrentIndex:function(t){return e(Q(t))},toggleRandom:function(){return e(Z())}}}))(at),ct=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(o.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).playPlaylist=function(){var t=e.props.item.song;e.props.setListPlaying(t),e.props.setCurrentIndex(0),e.props.isRandom&&e.props.toggleRandom()},e}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.item;return Object(me.jsx)("div",{className:"col-xl-2 col-lg-3 col-md-4 col-sm-6 mt-3",children:Object(me.jsxs)("div",{className:"card border-0 h-100",children:[Object(me.jsx)("div",{className:"playlist-bar-1"}),Object(me.jsx)("div",{className:"playlist-bar-2"}),Object(me.jsxs)("div",{className:"card-img box-shadow rounded",children:[Object(me.jsx)(m.b,{to:"/playlist/detail/".concat(e._id),children:Object(me.jsx)("img",{src:e.image,className:"card-img-custom card-img-top",alt:"..."})}),Object(me.jsxs)("div",{children:[Object(me.jsx)(xe.a,{className:"btn-ellipsis",id:"dropdown-options",drop:"left",title:Object(me.jsx)(ee.a,{icon:te.j}),children:Object(me.jsx)(Oe,{playlist:e,editMyPlaylist:!0,deleteMyPlaylist:!0,info:!0,copyLink:!0})}),Object(me.jsx)("div",{className:"card-img__overlay",children:Object(me.jsx)("div",{className:"btn-toggle-play",onClick:this.playPlaylist,children:Object(me.jsx)(ee.a,{icon:te.v})})})]})]}),Object(me.jsx)("div",{className:"card-body pl-0 pr-0",children:Object(me.jsx)("h6",{className:"card-title",children:Object(me.jsx)(m.b,{to:"/song/detail/".concat(e._id),children:e.title})})})]})})}}]),s}(n.Component),it=Object(i.b)((function(e){return{isRandom:e.player.isRandom}}),(function(e){return{setListPlaying:function(t){return e($(t))},setCurrentIndex:function(t){return e(Q(t))},playAudio:function(){return e(J())},toggleRandom:function(){return e(Z())}}}))(ct),ot=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={isLoading:!0,pageNums:null},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.areaId,s=this.props.history.location.search,n=new URLSearchParams(s);Promise.all([X.a.get("/playlist/".concat(t,"?page=").concat(n.get("page"))),X.a.get("/playlist/".concat(t,"/count"))]).then((function(t){var s=t[0].data,n=t[1].data;e.props.setPlaylistArea(s),e.setState({pageNums:Math.ceil(n/Le.NUMBER_OF_ITEM_PER_PAGE)})})).then((function(){return e.setState({isLoading:!1})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}},{key:"render",value:function(){if(this.state.isLoading||null===this.state.pageNums)return"";var e=this.props.playlistArea;return 0===e.length?Object(me.jsx)(Te,{}):Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)("div",{className:"row",children:e.map((function(e){return Object(me.jsx)(it,{item:e},e._id)}))}),Object(me.jsx)(Se,{pageNums:this.state.pageNums,history:this.props.history})]})}}]),s}(n.Component),lt=Object(i.b)((function(e){return{playlistArea:e.playlist.playlistArea}}),(function(e){return{setPlaylistArea:function(t){return e(function(e){return{type:I,playlists:e}}(t))}}}))(ot),ut=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.areas;return Object(me.jsx)(a.a.Fragment,{children:Object(me.jsx)(p.b,{path:"/playlist/:areaId",children:function(t){var s=t.match,n=t.history,a=(s?s.params:{}).areaId;return Object(me.jsx)(_e.a,{activeKey:a,onSelect:function(e){return n.replace(e)},children:e.map((function(e){return Object(me.jsx)(ke.a,{eventKey:e._id,title:e.name,children:Object(me.jsx)("div",{className:"mt-4 mb-4",children:a===e._id?Object(me.jsx)(lt,{match:s,history:n}):""})},e._id)}))})}})})}}]),s}(n.Component),dt=Object(i.b)((function(e){return{areas:e.area}}))(ut),ht=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).playAudio=function(){var e=n.props;if(e.currentSongId!==e.songDetail._id){var t=[n.props.songDetail];n.props.setListPlaying(t),n.props.setCurrentIndex(0)}else document.getElementById("player-audio").play()},n.collapse=function(){n.setState({showMore:!n.state.showMore}),n.collapseRef.current.classList.toggle("partially-hidden",n.state.showMore)},n.state={isLoading:!0,showMore:!1},n.collapseRef=a.a.createRef(),n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;X.a.get("/song/detail/".concat(t)).then((function(t){return e.props.setSongDetail(t.data)})).then((function(){return e.setState({isLoading:!1})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}},{key:"render",value:function(){if(this.state.isLoading)return"";var e=this.props.songDetail,t=e._id,s=e.title,n=e.artist,r=e.image,c=e.lyrics,i=e.category,o=e.playing,l=this.props,u=l.currentSongId,d=l.isPlaying,h=l.user,j=this.state.showMore;return Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsxs)("div",{className:"row section text-center text-lg-left",children:[Object(me.jsx)("div",{className:"col-xl-3 col-lg-4 col-sm-5",children:Object(me.jsx)("img",{src:r,alt:"",className:"img-detail box-shadow"})}),Object(me.jsx)("div",{className:"col-xl-9 col-lg-8 col-sm-7",children:Object(me.jsxs)("div",{className:"row pt-5",children:[Object(me.jsxs)("div",{className:"col-lg-8",children:[Object(me.jsx)("h3",{children:s}),Object(me.jsx)("h6",{className:"font-weight-normal",children:n.map((function(e,t){return Object(me.jsxs)(m.b,{to:"/artist/detail/".concat(e._id),children:[t>0&&", ",e.name]},e._id)}))}),Object(me.jsxs)("p",{className:"mt-4",children:[Object(me.jsx)("b",{children:"Th\u1ec3 lo\u1ea1i: "}),i.name]}),Object(me.jsxs)("p",{className:"mt-2 mb-2",children:[Object(me.jsx)("b",{children:"L\u01b0\u1ee3t nghe: "}),"".concat(Number(o/1e3).toFixed(2),"K")]})]}),Object(me.jsxs)("div",{className:"col-lg-4 d-flex flex-column align-items-center",children:[u===t&&d?Object(me.jsxs)("button",{className:"detail-btn btn btn-secondary box-shadow",onClick:function(){return document.getElementById("player-audio").pause()},children:[Object(me.jsx)(ee.a,{icon:te.u}),Object(me.jsx)("span",{children:" T\u1ea0M D\u1eeaNG"})]}):Object(me.jsxs)("button",{className:"detail-btn btn btn-danger box-shadow",onClick:this.playAudio,children:[Object(me.jsx)(ee.a,{icon:te.v}),Object(me.jsx)("span",{children:" PH\xc1T"})]}),Object(me.jsx)(xe.a,{className:"box-shadow",id:"detail-dropdown-options",drop:"left",title:Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)(ee.a,{icon:te.d}),Object(me.jsx)("span",{children:" L\u1ef0A CH\u1eccN"})]}),children:Object(me.jsx)(Oe,{song:this.props.songDetail,like:!0,addToPlaylist:!0,playNext:!0,playLast:!0,copyLink:!0,download:!0})})]})]})})]}),c?Object(me.jsxs)("div",{className:"lyrics box-shadow section",children:[Object(me.jsx)("div",{className:"lyrics__header",children:"L\u1eddi b\xe0i h\xe1t"}),Object(me.jsx)("hr",{}),Object(me.jsx)("div",{className:"lyrics__content partially-hidden",ref:this.collapseRef,dangerouslySetInnerHTML:{__html:c}}),Object(me.jsx)("span",{className:"lyrics__collapse",onClick:this.collapse,children:j?"\u1ea8n b\u1edbt":"Xem th\xeam"})]}):Object(me.jsx)("div",{className:"lyrics box-shadow section",children:Object(me.jsx)("div",{className:"lyrics__header",children:"Ch\u01b0a c\xf3 l\u1eddi cho b\xe0i h\xe1t n\xe0y"})}),h.userToken?Object(me.jsx)(Ye,{}):""]})}}]),s}(n.Component),jt=Object(i.b)((function(e){return{isPlaying:e.player.isPlaying,songDetail:e.song.songDetail,currentSongId:e.player.currentSongId,user:e.user}}),(function(e){return{setSongDetail:function(t){return e(function(e){return{type:P,song:e}}(t))},setListPlaying:function(t){return e($(t))},setCurrentIndex:function(t){return e(Q(t))},playAudio:function(){return e(J())}}}))(ht),pt=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={isLoading:!0,pageNums:null},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.areaId,s=this.props.match.params.categoryId,n=this.props.history.location.search,a=new URLSearchParams(n);Promise.all([X.a.get("/song/".concat(t,"/").concat(s,"?page=").concat(a.get("page"))),X.a.get("/song/".concat(t,"/").concat(s,"/count"))]).then((function(t){var s=t[0].data,n=t[1].data;e.props.setSongCategory(s),e.setState({pageNums:Math.ceil(n/Le.NUMBER_OF_ITEM_PER_PAGE)})})).then((function(){return e.setState({isLoading:!1})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}},{key:"render",value:function(){if(this.state.isLoading||null===this.state.pageNums)return"";var e=this.props.songCategory;return 0===e.length?Object(me.jsx)(Te,{}):Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)("div",{className:"row",children:e.map((function(e){return Object(me.jsx)(ye,{item:e},e._id)}))}),Object(me.jsx)(Se,{pageNums:this.state.pageNums,history:this.props.history})]})}}]),s}(n.Component),mt=Object(i.b)((function(e){return{songCategory:e.song.songCategory}}),(function(e){return{setSongCategory:function(t){return e(function(e){return{type:L,songs:e}}(t))}}}))(pt),bt=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.areas;return Object(me.jsx)(a.a.Fragment,{children:Object(me.jsx)(p.b,{path:"/song/:areaId/:categoryId",children:function(t){var s=t.match,n=t.history,a=(s?s.params:{}).areaId,r=(s?s.params:{}).categoryId;return Object(me.jsx)(_e.a,{activeKey:a,onSelect:function(t){var s="";switch(t){case e[0]._id:s=e[0].category[0]._id;break;case e[1]._id:s=e[1].category[0]._id;break;case e[2]._id:s=e[2].category[0]._id;break;case e[3]._id:s=e[3].category[0]._id}return n.replace("/song/".concat(t,"/").concat(s))},children:e.map((function(e){return Object(me.jsx)(ke.a,{eventKey:e._id,title:e.name,children:Object(me.jsx)("div",{className:"category-tab mt-3 mb-3",children:Object(me.jsx)(_e.a,{activeKey:r,onSelect:function(e){return n.replace(e)},children:e.category.map((function(e){return Object(me.jsx)(ke.a,{eventKey:e._id,title:e.name,children:Object(me.jsx)("div",{className:"mt-4 mb-4",children:r===e._id?Object(me.jsx)(mt,{match:s,history:n}):""})},e._id)}))})})},e._id)}))})}})})}}]),s}(n.Component),gt=Object(i.b)((function(e){return{areas:e.area}}))(bt),Ot=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={usernameMessage:"",passwordMessage:""},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;et({form:"#login-form",formGroupSelector:".form-group",errorSelector:".form-message",rules:[et.isRequired("#username"),et.isRequired("#password"),et.minLength("#username",4),et.minLength("#password",6)],onSubmit:function(t){X.a.post("/user/login",t).then((function(t){var s=t.data;e.props.setCurrentUser(s),Promise.all([X.a.get("/user/".concat(s.userId,"/recommend"),{headers:{Authorization:"Bearer ".concat(s.userToken)}}),X.a.get("/user/".concat(s.userId,"/liked-song/count"),{headers:{Authorization:"Bearer ".concat(s.userToken)}}),X.a.get("/user/".concat(s.userId,"/my-playlist/count"),{headers:{Authorization:"Bearer ".concat(s.userToken)}})]).then((function(t){t[0].data&&e.props.setRecommendation(t[0].data),e.props.setLikedSongCount(t[1].data),e.props.setMyPlaylistCount(t[2].data)})).catch(console.log)})).then((function(){var t=e.props.location.state?e.props.location.state.prevPath:"/";e.props.history.replace(t),W({title:"Th\xe0nh c\xf4ng!",message:"B\u1ea1n \u0111\xe3 \u0111\u0103ng nh\u1eadp th\xe0nh c\xf4ng!",type:"success"})})).catch((function(t){var s=t.response.data;"username"===s.field&&e.setState({usernameMessage:s.message}),"password"===s.field&&e.setState({passwordMessage:s.message})}))}})}},{key:"render",value:function(){var e=this;return Object(me.jsx)("div",{className:"auth",children:Object(me.jsxs)("form",{action:"true",method:"POST",className:"form box-shadow",id:"login-form",children:[Object(me.jsxs)("div",{className:"d-flex align-items-center justify-content-around",children:[Object(me.jsx)("h3",{className:"heading",children:"\u0110\u0103ng nh\u1eadp"}),Object(me.jsx)(m.b,{to:"/",children:Object(me.jsx)("img",{src:"/images/logos/logo.svg",alt:"logo-app"})})]}),Object(me.jsx)("div",{className:"spacer"}),Object(me.jsxs)("div",{className:"form-group ".concat(this.state.usernameMessage?"api-invalid":""),children:[Object(me.jsx)("label",{htmlFor:"username",className:"form-label",children:"T\xean \u0111\u0103ng nh\u1eadp"}),Object(me.jsx)("input",{autoFocus:!0,id:"username",name:"username",type:"text",placeholder:"Nh\u1eadp t\xean \u0111\u0103ng nh\u1eadp",className:"form-control",onChange:function(){return e.setState({usernameMessage:""})}}),Object(me.jsx)("span",{className:"form-message"}),Object(me.jsx)("span",{className:"api-message",children:this.state.usernameMessage})]}),Object(me.jsxs)("div",{className:"form-group ".concat(this.state.passwordMessage?"api-invalid":""),children:[Object(me.jsx)("label",{htmlFor:"password",className:"form-label",children:"M\u1eadt kh\u1ea9u"}),Object(me.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u",className:"form-control",onChange:function(){return e.setState({passwordMessage:""})}}),Object(me.jsx)("span",{className:"form-message"}),Object(me.jsx)("span",{className:"api-message",children:this.state.passwordMessage})]}),Object(me.jsx)("button",{className:"form-submit",children:"\u0110\u0103ng nh\u1eadp"}),Object(me.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[Object(me.jsx)(m.b,{to:"/forgot-password",className:"auth__options text-info",children:"Qu\xean m\u1eadt kh\u1ea9u?"}),Object(me.jsx)(m.b,{to:"/register",className:"auth__options text-info",children:"\u0110\u0103ng k\xfd ngay!"})]})]})})}}]),s}(n.Component),xt=Object(i.b)(null,(function(e){return{setCurrentUser:function(t){return e(Qe(t))},setLikedSongCount:function(t){return e(V(t))},setMyPlaylistCount:function(t){return e(re(t))},setRecommendation:function(t){return e(z(t))}}}))(Ot),ft=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).checkExisted=function(e){var t={};t[e.target.name]=e.target.value,X.a.post("/user/register/existed",t).then((function(e){var t=e.data;"username"===t.field&&n.setState({usernameMessage:t.message}),"email"===t.field&&n.setState({emailMessage:t.message})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))},n.state={usernameMessage:"",emailMessage:""},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;et({form:"#register-form",formGroupSelector:".form-group",errorSelector:".form-message",rules:[et.isRequired("#username"),et.isRequired("#email"),et.isRequired("#password"),et.isRequired("#password_confirmation"),et.minLength("#username",4),et.isEmail("#email"),et.minLength("#password",6),et.isConfirmed("#password_confirmation",(function(){return document.querySelector("#register-form #password").value}),"M\u1eadt kh\u1ea9u nh\u1eadp l\u1ea1i kh\xf4ng ch\xednh x\xe1c")],onSubmit:function(t){delete t.password_confirmation,e.state.usernameMessage||e.state.emailMessage||X.a.post("/user/register",t).then((function(t){var s=t.data;e.props.setCurrentUser(s),e.props.history.replace("/"),W({title:"Th\xe0nh c\xf4ng!",message:"B\u1ea1n \u0111\xe3 \u0111\u0103ng k\xfd th\xe0nh c\xf4ng!",type:"success"})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}})}},{key:"render",value:function(){var e=this;return Object(me.jsx)("div",{className:"auth",children:Object(me.jsxs)("form",{action:"true",method:"POST",className:"form box-shadow",id:"register-form",children:[Object(me.jsxs)("div",{className:"d-flex align-items-center justify-content-around",children:[Object(me.jsx)("h3",{className:"heading",children:"\u0110\u0103ng k\xfd"}),Object(me.jsx)(m.b,{to:"/",children:Object(me.jsx)("img",{src:"/images/logos/logo.svg",alt:"logo-app"})})]}),Object(me.jsx)("div",{className:"spacer"}),Object(me.jsxs)("div",{className:"form-group ".concat(this.state.usernameMessage?"api-invalid":""),children:[Object(me.jsx)("label",{htmlFor:"username",className:"form-label",children:"T\xean \u0111\u0103ng nh\u1eadp"}),Object(me.jsx)("input",{autoFocus:!0,id:"username",name:"username",type:"text",placeholder:"Nh\u1eadp t\xean \u0111\u0103ng nh\u1eadp",className:"form-control",onBlur:this.checkExisted,onInput:function(){return e.setState({usernameMessage:""})}}),Object(me.jsx)("span",{className:"form-message"}),Object(me.jsx)("span",{className:"api-message",children:this.state.usernameMessage})]}),Object(me.jsxs)("div",{className:"form-group ".concat(this.state.emailMessage?"api-invalid":""),children:[Object(me.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),Object(me.jsx)("input",{id:"email",name:"email",type:"text",placeholder:"VD: email@domain.com",className:"form-control",onBlur:this.checkExisted,onInput:function(){return e.setState({emailMessage:""})}}),Object(me.jsx)("span",{className:"form-message"}),Object(me.jsx)("span",{className:"api-message",children:this.state.emailMessage})]}),Object(me.jsxs)("div",{className:"form-group",children:[Object(me.jsx)("label",{htmlFor:"password",className:"form-label",children:"M\u1eadt kh\u1ea9u"}),Object(me.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u",className:"form-control"}),Object(me.jsx)("span",{className:"form-message"})]}),Object(me.jsxs)("div",{className:"form-group",children:[Object(me.jsx)("label",{htmlFor:"password_confirmation",className:"form-label",children:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u"}),Object(me.jsx)("input",{id:"password_confirmation",name:"password_confirmation",placeholder:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u",type:"password",className:"form-control"}),Object(me.jsx)("span",{className:"form-message"})]}),Object(me.jsx)("button",{className:"form-submit",children:"\u0110\u0103ng k\xfd"}),Object(me.jsxs)("div",{className:"d-flex justify-content-center mt-3",children:[Object(me.jsx)("span",{className:"auth__options",children:"\u0110\xe3 c\xf3 t\xe0i kho\u1ea3n?"}),Object(me.jsx)(m.b,{to:"/login",className:"auth__options ml-2 text-info",children:"\u0110\u0103ng nh\u1eadp ngay!"})]})]})})}}]),s}(n.Component),yt=Object(i.b)(null,(function(e){return{setCurrentUser:function(t){return e(Qe(t))}}}))(ft),vt=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).checkExisted=function(e){var t={};document.querySelector("input#email + span.form-message").innerText||(t[e.target.name]=e.target.value),X.a.post("/user/register/existed",t).then((function(e){e.data.message||n.setState({emailMessage:"Email kh\xf4ng kh\u1edbp v\u1edbi b\u1ea5t k\u1ef3 t\xe0i kho\u1ea3n n\xe0o!"})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))},n.state={emailMessage:"",isSended:!1,email:""},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;et({form:"#forgot-password-form",formGroupSelector:".form-group",errorSelector:".form-message",rules:[et.isRequired("#email"),et.isEmail("#email")],onSubmit:function(t){e.state.emailMessage||(e.setState({email:t.email}),X.a.post("/user/forgot-password",t).then((function(){e.setState({isSended:!0})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})})))}})}},{key:"render",value:function(){var e=this;return Object(me.jsx)("div",{className:"auth",children:this.state.isSended?Object(me.jsxs)("form",{className:"form box-shadow",children:[Object(me.jsxs)("div",{className:"d-flex align-items-center justify-content-around",children:[Object(me.jsx)("h3",{className:"heading",children:"Ki\u1ec3m tra email"}),Object(me.jsx)(m.b,{to:"/",children:Object(me.jsx)("img",{src:"/images/logos/logo.svg",alt:"logo-app"})})]}),Object(me.jsx)("div",{className:"spacer"}),Object(me.jsx)("div",{className:"p-4 bg-light",children:Object(me.jsxs)("span",{children:["Ch\xfang t\xf4i \u0111\xe3 g\u1eedi y\xeau c\u1ea7u kh\xf4i ph\u1ee5c m\u1eadt kh\u1ea9u t\u1edbi"," ",Object(me.jsx)("b",{children:this.state.email}),". Vui l\xf2ng ki\u1ec3m tra email v\xe0 l\xe0m theo h\u01b0\u1edbng d\u1eabn."]})}),Object(me.jsx)("div",{className:"mt-5",children:Object(me.jsx)(m.b,{to:"/",className:"form-submit",children:"Quay v\u1ec1 trang ch\u1ee7"})})]}):Object(me.jsxs)("form",{action:"true",method:"POST",className:"form box-shadow",id:"forgot-password-form",children:[Object(me.jsxs)("div",{className:"d-flex align-items-center justify-content-around",children:[Object(me.jsx)("h3",{className:"heading",children:"Kh\xf4i ph\u1ee5c m\u1eadt kh\u1ea9u"}),Object(me.jsx)(m.b,{to:"/",children:Object(me.jsx)("img",{src:"/images/logos/logo.svg",alt:"logo-app"})})]}),Object(me.jsx)("div",{className:"spacer"}),Object(me.jsxs)("div",{className:"form-group ".concat(this.state.emailMessage?"api-invalid":""),children:[Object(me.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email \u0111\u0103ng k\xfd t\xe0i kho\u1ea3n"}),Object(me.jsx)("input",{id:"email",name:"email",type:"text",placeholder:"VD: email@domain.com",className:"form-control",onBlur:this.checkExisted,onInput:function(){return e.setState({emailMessage:""})}}),Object(me.jsx)("span",{className:"form-message"}),Object(me.jsx)("span",{className:"api-message",children:this.state.emailMessage})]}),Object(me.jsx)("button",{className:"form-submit",children:"Kh\xf4i ph\u1ee5c m\u1eadt kh\u1ea9u"}),Object(me.jsx)("div",{className:"d-flex justify-content-center mt-3",children:Object(me.jsx)(m.b,{to:"/login",className:"auth__options text-info",children:"\u0110\u0103ng nh\u1eadp"})})]})})}}]),s}(n.Component),Nt=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={isSuccessed:!1},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.token;et({form:"#reset-password-form",formGroupSelector:".form-group",errorSelector:".form-message",rules:[et.isRequired("#password"),et.isRequired("#password_confirmation"),et.minLength("#password",6),et.isConfirmed("#password_confirmation",(function(){return document.querySelector("#reset-password-form #password").value}),"M\u1eadt kh\u1ea9u nh\u1eadp l\u1ea1i kh\xf4ng ch\xednh x\xe1c")],onSubmit:function(s){delete s.password_confirmation,s.resettoken=t,X.a.post("/user/reset-password",s).then((function(){e.setState({isSuccessed:!0})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}})}},{key:"render",value:function(){return Object(me.jsx)("div",{className:"auth",children:this.state.isSuccessed?Object(me.jsxs)("form",{className:"form box-shadow",children:[Object(me.jsxs)("div",{className:"d-flex align-items-center justify-content-around",children:[Object(me.jsx)("h3",{className:"heading",children:"C\u1eadp nh\u1eadt m\u1eadt kh\u1ea9u"}),Object(me.jsx)(m.b,{to:"/",children:Object(me.jsx)("img",{src:"/images/logos/logo.svg",alt:"logo-app"})})]}),Object(me.jsx)("div",{className:"spacer"}),Object(me.jsx)("div",{className:"p-4 bg-light",children:Object(me.jsx)("span",{children:"B\u1ea1n \u0111\xe3 thay \u0111\u1ed5i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng. H\xe3y \u0111\u0103ng nh\u1eadp ngay \u0111\u1ec3 c\xf3 tr\u1ea3i nghi\u1ec7m t\u1ed1t nh\u1ea5t t\u1ea1i MusicRS!"})}),Object(me.jsx)("div",{className:"mt-5",children:Object(me.jsx)(m.b,{to:"/login",className:"form-submit",children:"\u0110\u0103ng nh\u1eadp"})})]}):Object(me.jsxs)("form",{action:"true",method:"POST",className:"form box-shadow",id:"reset-password-form",children:[Object(me.jsxs)("div",{className:"d-flex align-items-center justify-content-around",children:[Object(me.jsx)("h3",{className:"heading",children:"Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u"}),Object(me.jsx)(m.b,{to:"/",children:Object(me.jsx)("img",{src:"/images/logos/logo.svg",alt:"logo-app"})})]}),Object(me.jsx)("div",{className:"spacer"}),Object(me.jsxs)("div",{className:"form-group",children:[Object(me.jsx)("label",{htmlFor:"password",className:"form-label",children:"M\u1eadt kh\u1ea9u"}),Object(me.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u",className:"form-control"}),Object(me.jsx)("span",{className:"form-message"})]}),Object(me.jsxs)("div",{className:"form-group",children:[Object(me.jsx)("label",{htmlFor:"password_confirmation",className:"form-label",children:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u"}),Object(me.jsx)("input",{id:"password_confirmation",name:"password_confirmation",placeholder:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u",type:"password",className:"form-control"}),Object(me.jsx)("span",{className:"form-message"})]}),Object(me.jsx)("button",{className:"form-submit",children:"T\u1ea1o m\u1eadt kh\u1ea9u"})]})})}}]),s}(n.Component),_t=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={isLoading:!0,pageNums:null},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.history.location.search,s=new URLSearchParams(t);Promise.all([X.a.get("/search/song?q=".concat(s.get("q"),"&page=").concat(s.get("page"))),X.a.get("/search/count/song?q=".concat(s.get("q")))]).then((function(t){var s=t[0].data,n=t[1].data;e.props.setResult(s),e.setState({pageNums:Math.ceil(n/Le.NUMBER_OF_ITEM_PER_PAGE)})})).then((function(){return e.setState({isLoading:!1})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}},{key:"render",value:function(){if(this.state.isLoading||null===this.state.pageNums)return"";var e=this.props.result;return 0===e.length?Object(me.jsx)(Te,{}):Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)("div",{className:"row",children:e.map((function(e){return Object(me.jsx)(ye,{item:e},e._id)}))}),Object(me.jsx)(Se,{pageNums:this.state.pageNums,history:this.props.history})]})}}]),s}(n.Component),kt=Object(i.b)((function(e){return{result:e.search.result}}),(function(e){return{setResult:function(t){return e(pe(t))}}}))(_t),wt=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={isLoading:!0,pageNums:null},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.history.location.search,s=new URLSearchParams(t);Promise.all([X.a.get("/search/playlist?q=".concat(s.get("q"),"&page=").concat(s.get("page"))),X.a.get("/search/count/playlist?q=".concat(s.get("q")))]).then((function(t){var s=t[0].data,n=t[1].data;e.props.setResult(s),e.setState({pageNums:Math.ceil(n/Le.NUMBER_OF_ITEM_PER_PAGE)})})).then((function(){return e.setState({isLoading:!1})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}},{key:"render",value:function(){if(this.state.isLoading||null===this.state.pageNums)return"";var e=this.props.result;return 0===e.length?Object(me.jsx)(Te,{}):Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)("div",{className:"row",children:e.map((function(e){return Object(me.jsx)(it,{item:e},e._id)}))}),Object(me.jsx)(Se,{pageNums:this.state.pageNums,history:this.props.history})]})}}]),s}(n.Component),St=Object(i.b)((function(e){return{result:e.search.result}}),(function(e){return{setResult:function(t){return e(pe(t))}}}))(wt),Ct=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={isLoading:!0,pageNums:null},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.history.location.search,s=new URLSearchParams(t);Promise.all([X.a.get("/search/artist?q=".concat(s.get("q"),"&page=").concat(s.get("page"))),X.a.get("/search/count/artist?q=".concat(s.get("q")))]).then((function(t){var s=t[0].data,n=t[1].data;e.props.setResult(s),e.setState({pageNums:Math.ceil(n/Le.NUMBER_OF_ITEM_PER_PAGE)})})).then((function(){return e.setState({isLoading:!1})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))}},{key:"render",value:function(){if(this.state.isLoading||null===this.state.pageNums)return"";var e=this.props.result;return 0===e.length?Object(me.jsx)(Te,{}):Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)("div",{className:"row",children:e.map((function(e){return Object(me.jsx)(Pe,{item:e},e._id)}))}),Object(me.jsx)(Se,{pageNums:this.state.pageNums,history:this.props.history})]})}}]),s}(n.Component),Pt=Object(i.b)((function(e){return{result:e.search.result}}),(function(e){return{setResult:function(t){return e(pe(t))}}}))(Ct),Tt=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(me.jsx)(a.a.Fragment,{children:Object(me.jsx)(p.b,{path:"/search/:type",children:function(t){var s=t.match,n=t.history,a=(s?s.params:{}).type,r=e.props.history.location.search,c=new URLSearchParams(r);return Object(me.jsxs)(_e.a,{activeKey:a,onSelect:function(e){return n.replace("".concat(e,"?q=").concat(c.get("q")))},children:[Object(me.jsx)(ke.a,{eventKey:"song",title:"B\xe0i h\xe1t",children:Object(me.jsx)("div",{className:"mt-4 mb-4",children:"song"===a?Object(me.jsx)(kt,{history:n}):""})}),Object(me.jsx)(ke.a,{eventKey:"playlist",title:"Playlist",children:Object(me.jsx)("div",{className:"mt-4 mb-4",children:"playlist"===a?Object(me.jsx)(St,{history:n}):""})}),Object(me.jsx)(ke.a,{eventKey:"artist",title:"Ngh\u1ec7 s\u0129",children:Object(me.jsx)("div",{className:"mt-4 mb-4",children:"artist"===a?Object(me.jsx)(Pt,{history:n}):""})})]})}})})}}]),s}(n.Component),Lt=Object(i.b)(null,{})(Tt),It=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).getLikedSong=function(){var e=n.props.user,t=n.props.history.location.search,s=new URLSearchParams(t);Promise.all([X.a.get("/user/".concat(e.userId,"/liked-song?page=").concat(s.get("page")),{headers:{Authorization:"Bearer ".concat(e.userToken)}}),X.a.get("/user/".concat(e.userId,"/liked-song/count"),{headers:{Authorization:"Bearer ".concat(e.userToken)}})]).then((function(e){var t=e[0].data,s=e[1].data;n.setState({likedSong:t,pageNums:Math.ceil(s/Le.NUMBER_OF_ITEM_PER_PAGE),count:s})})).then((function(){return n.setState({isLoading:!1})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))},n.state={isLoading:!0,pageNums:null,count:null,likedSong:[]},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.getLikedSong()}},{key:"componentDidUpdate",value:function(e){e.likedSongCount!==this.props.likedSongCount&&this.getLikedSong()}},{key:"render",value:function(){if(this.state.isLoading||null===this.state.pageNums)return"";var e=this.state.likedSong;return Object(me.jsxs)("div",{className:"section",children:[Object(me.jsxs)("div",{className:"heading",children:[Object(me.jsxs)("div",{className:"d-flex align-items-end justify-content-between",children:[Object(me.jsx)("h4",{className:"mb-0 p-2 rounded bg-light box-shadow",children:"B\xe0i h\xe1t y\xeau th\xedch"}),Object(me.jsxs)("p",{className:"p-2 rounded bg-light box-shadow",children:[this.state.count," b\xe0i h\xe1t"]})]}),Object(me.jsx)("hr",{})]}),0===e.length?Object(me.jsx)(Te,{}):Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)("div",{className:"row",children:e.map((function(e){return Object(me.jsx)(ye,{item:e},e._id)}))}),Object(me.jsx)(Se,{pageNums:this.state.pageNums,history:this.props.history})]})]})}}]),s}(n.Component),Rt=Object(i.b)((function(e){return{user:e.user,likedSongCount:e.song.likedSongCount}}))(It),Mt=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).getMyPlaylist=function(){var e=n.props.user,t=n.props.history.location.search,s=new URLSearchParams(t);Promise.all([X.a.get("/user/".concat(e.userId,"/my-playlist?page=").concat(s.get("page")),{headers:{Authorization:"Bearer ".concat(e.userToken)}}),X.a.get("/user/".concat(e.userId,"/my-playlist/count"),{headers:{Authorization:"Bearer ".concat(e.userToken)}})]).then((function(e){var t=e[0].data,s=e[1].data;n.props.setMyPlaylist(t),n.setState({pageNums:Math.ceil(s/Le.NUMBER_OF_ITEM_PER_PAGE),count:s})})).then((function(){return n.setState({isLoading:!1})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))},n.createPlaylist=function(e){e.preventDefault();var t=n.props.user,s=Object(ne.a)({},e.target[0].name,e.target[0].value);""===s.title?W({title:"Th\u1ea5t b\u1ea1i!",message:"T\xean playlist kh\xf4ng \u0111\u01b0\u1ee3c r\u1ed7ng!",type:"error"}):X.a.post("/user/".concat(t.userId,"/my-playlist/create"),s,{headers:{Authorization:"Bearer ".concat(t.userToken)}}).then((function(e){e.data.success&&(W({title:"Th\xe0nh c\xf4ng!",message:e.data.success,type:"success"}),n.setState({showCreatePlaylist:!1}),n.props.setMyPlaylistCount(n.props.myPlaylistCount+1)),e.data.error&&W({title:"Th\u1ea5t b\u1ea1i!",message:e.data.error,type:"error"})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})}))},n.state={isLoading:!0,pageNums:null,count:null,showCreatePlaylist:!1},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.getMyPlaylist()}},{key:"componentDidUpdate",value:function(e){e.myPlaylistCount!==this.props.myPlaylistCount&&this.getMyPlaylist()}},{key:"render",value:function(){var e=this;if(this.state.isLoading||null===this.state.pageNums)return"";var t=this.props.myPlaylist;return Object(me.jsxs)("div",{className:"section",children:[Object(me.jsxs)("div",{className:"heading",children:[Object(me.jsxs)("div",{className:"d-flex align-items-end justify-content-between",children:[Object(me.jsx)("h4",{className:"mb-0 p-2 rounded bg-light box-shadow",children:"Playlist c\u1ee7a b\u1ea1n"}),Object(me.jsxs)("button",{className:"btn btn-danger box-shadow",onClick:function(){return e.setState({showCreatePlaylist:!0})},children:[Object(me.jsx)(ee.a,{icon:te.x}),Object(me.jsx)("span",{children:" T\u1ea1o m\u1edbi"})]})]}),Object(me.jsx)("hr",{})]}),0===t.length?Object(me.jsx)(Te,{}):Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)("div",{className:"row",children:t.map((function(e){return Object(me.jsx)(it,{item:e},e._id)}))}),Object(me.jsx)(Se,{pageNums:this.state.pageNums,history:this.props.history})]}),Object(me.jsxs)(ie.a,{show:this.state.showCreatePlaylist,onHide:function(){return e.setState({showCreatePlaylist:!1})},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(me.jsx)(ie.a.Header,{closeButton:!0,className:"bg-light",children:Object(me.jsx)("h5",{className:"mb-0",children:"T\u1ea1o playlist m\u1edbi"})}),Object(me.jsx)(ie.a.Body,{className:"playlist-modal-body bg-light",children:Object(me.jsx)("form",{onSubmit:this.createPlaylist,method:"POST",id:"create-playlist-form",children:Object(me.jsxs)("div",{className:"d-flex",children:[Object(me.jsx)("div",{className:"flex-grow-1",children:Object(me.jsx)("input",{name:"title",type:"text",placeholder:"Nh\u1eadp t\xean playlist c\u1ea7n t\u1ea1o!",className:"h-100 w-100 bg-light form-control",onFocus:function(){return window.removeEventListener("keydown",he)},onBlur:function(){return window.addEventListener("keydown",he)}})}),Object(me.jsx)("button",{className:"btn btn-info ml-2",children:"T\u1ea1o playlist"})]})})})]})]})}}]),s}(n.Component),Et=Object(i.b)((function(e){return{myPlaylist:e.playlist.myPlaylist,user:e.user,myPlaylistCount:e.playlist.myPlaylistCount}}),(function(e){return{setMyPlaylist:function(t){return e(ae(t))},setMyPlaylistCount:function(t){return e(re(t))}}}))(Mt),At=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.historyListen;return Object(me.jsxs)("div",{className:"section",children:[Object(me.jsxs)("div",{className:"heading",children:[Object(me.jsxs)("div",{className:"d-flex align-items-end justify-content-between",children:[Object(me.jsx)("h4",{className:"mb-0 p-2 rounded bg-light box-shadow",children:"B\xe0i h\xe1t nghe g\u1ea7n \u0111\xe2y"}),Object(me.jsxs)("p",{className:"p-2 rounded bg-light box-shadow",children:[e.length," b\xe0i h\xe1t"]})]}),Object(me.jsx)("hr",{})]}),0===e.length?Object(me.jsx)(Te,{}):Object(me.jsx)("div",{className:"row",children:e.map((function(e){return Object(me.jsx)(ye,{item:e},e._id)}))})]})}}]),s}(n.Component),Dt=Object(i.b)((function(e){return{historyListen:e.song.historyListen}}))(At);function Bt(e){var t=e.component,s=e.token,n=Object(j.a)(e,["component","token"]);return Object(me.jsx)(p.b,Object(h.a)(Object(h.a)({},n),{},{render:function(e){return s?Object(me.jsx)(t,Object(h.a)({},e),e.history.location.search):Object(me.jsx)(p.a,{to:{pathname:"/login",state:{prevPath:e.location.pathname}}})}}))}var Ft=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).getRecommendation=function(){var e=n.props.user;e.userToken&&X.a.get("/user/".concat(e.userId,"/recommend"),{headers:{Authorization:"Bearer ".concat(e.userToken)}}).then((function(e){e.data&&n.props.setRecommendation(e.data)})).catch((function(){return W({title:"Th\u1ea5t b\u1ea1i!",message:"Kh\xf4ng th\u1ec3 l\u1ea5y g\u1ee3i \xfd!",type:"error"})}))},n.state={isLoading:!0},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;Promise.all([X.a.get("/area"),X.a.get("/song/chart")]).then((function(t){e.props.setAreas(t[0].data),e.props.setChart(t[1].data)})).then((function(){return e.setState({isLoading:!1})})).catch((function(e){return W({title:"Th\u1ea5t b\u1ea1i!",message:"".concat(e.response?e.response.data.message:"C\xf3 l\u1ed7i x\u1ea3y ra!"),type:"error"})})),function(e,t,s){var n=(new Date).getTime();setTimeout((function(){s(),setInterval((function(){s()}),t)}),n<e?e-n:e+t-n)}((new Date).setMinutes(0),36e5,this.getRecommendation)}},{key:"render",value:function(){if(this.state.isLoading)return Object(me.jsx)(qe,{});var e=this.props.user;return Object(me.jsx)(m.a,{children:Object(me.jsxs)("div",{className:"wrapper",children:[Object(me.jsx)("div",{id:"my-toast"}),Object(me.jsx)(We,{location:this.props.location}),Object(me.jsxs)("div",{className:"content",children:[Object(me.jsx)(nt,{}),Object(me.jsx)("div",{className:"main-content container-fruit",children:Object(me.jsxs)(p.d,{children:[Object(me.jsx)(p.b,{exact:!0,path:"/search/:type",render:function(e){return Object(me.jsx)(Lt,Object(h.a)({},e),e.history.location.search)}}),Object(me.jsx)(p.b,{exact:!0,path:"/song/detail/:id",render:function(e){return Object(me.jsx)(jt,Object(h.a)({},e),e.match.params.id)}}),Object(me.jsx)(p.b,{exact:!0,path:"/song/:area/:category",render:function(e){return Object(me.jsx)(gt,Object(h.a)({},e),e.history.location.search)}}),Object(me.jsx)(p.b,{exact:!0,path:"/playlist/detail/:id",render:function(e){return Object(me.jsx)(rt,Object(h.a)({},e),e.match.params.id)}}),Object(me.jsx)(p.b,{exact:!0,path:"/playlist/:area",render:function(e){return Object(me.jsx)(dt,Object(h.a)({},e),e.history.location.search)}}),Object(me.jsx)(p.b,{exact:!0,path:"/artist/detail/:id",render:function(e){return Object(me.jsx)(Ne,Object(h.a)({},e),e.match.params.id)}}),Object(me.jsx)(p.b,{exact:!0,path:"/artist/:area",render:function(e){return Object(me.jsx)(Ee,Object(h.a)({},e),e.history.location.search)}}),e.userToken?null:Object(me.jsx)(p.b,{exact:!0,path:"/login",component:xt}),e.userToken?null:Object(me.jsx)(p.b,{exact:!0,path:"/register",component:yt}),e.userToken?null:Object(me.jsx)(p.b,{exact:!0,path:"/forgot-password",component:vt}),Object(me.jsx)(p.b,{exact:!0,path:"/reset-password/:token",component:Nt}),Object(me.jsx)(Bt,{exact:!0,path:"/user/recommend",token:e.userToken,component:Ye}),Object(me.jsx)(Bt,{exact:!0,path:"/user/liked-song",token:e.userToken,component:Rt}),Object(me.jsx)(Bt,{exact:!0,path:"/user/my-playlist",token:e.userToken,component:Et}),Object(me.jsx)(Bt,{exact:!0,path:"/user/history",token:e.userToken,component:Dt}),Object(me.jsx)(p.b,{exact:!0,path:"/",component:Je}),Object(me.jsx)(p.b,{render:function(){return Object(me.jsx)(p.a,{to:"/"})}})]})}),Object(me.jsx)(Fe,{})]})]})})}}]),s}(n.Component),qt=Object(i.b)((function(e){return{areas:e.area,user:e.user}}),(function(e){return{setAreas:function(t){return e(function(e){return{type:T,areas:e}}(t))},setChart:function(t){return e(function(e){return{type:H,songs:e}}(t))},setRecommendation:function(t){return e(z(t))}}}))(Ft),Ut=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,133)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),n(e),a(e),r(e),c(e)}))},Gt=s(38),Kt=s(88),Ht={isPlaying:!1,isRandom:!1,repeat:"none",volume:1,currentIndex:0,currentSongId:"",progressPercent:0,currentTime:0,duration:0,listPlaying:[]},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(h.a)(Object(h.a)({},e),{},{isPlaying:!0});case x:return Object(h.a)(Object(h.a)({},e),{},{isPlaying:!1});case f:return Object(h.a)(Object(h.a)({},e),{},{currentTime:t.newTime});case g:return Object(h.a)(Object(h.a)({},e),{},{currentSongId:t.currentSongId});case y:return Object(h.a)(Object(h.a)({},e),{},{progressPercent:t.newPercent});case v:return Object(h.a)(Object(h.a)({},e),{},{currentIndex:t.newIndex});case N:return Object(h.a)(Object(h.a)({},e),{},{duration:t.newDuration});case _:return Object(h.a)(Object(h.a)({},e),{},{repeat:t.value});case k:return Object(h.a)(Object(h.a)({},e),{},{isRandom:!e.isRandom});case w:return Object(h.a)(Object(h.a)({},e),{},{volume:t.newVolume});case S:return Object(h.a)(Object(h.a)({},e),{},{listPlaying:t.listPlaying});default:return e}},zt={playlistArea:[],myPlaylist:null,myPlaylistCount:null,playlistDetail:{}},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(h.a)(Object(h.a)({},e),{},{playlistArea:t.playlists});case R:return Object(h.a)(Object(h.a)({},e),{},{myPlaylist:t.playlists});case U:return Object(h.a)(Object(h.a)({},e),{},{myPlaylistCount:t.count});case M:return Object(h.a)(Object(h.a)({},e),{},{playlistDetail:t.playlist});default:return e}},Xt={songs:[],songDetail:{},songCategory:[],historyListen:[],likedSongCount:null,recommendation:null,chart:[]},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(h.a)(Object(h.a)({},e),{},{songs:t.songs});case P:return Object(h.a)(Object(h.a)({},e),{},{songDetail:t.song});case L:return Object(h.a)(Object(h.a)({},e),{},{songCategory:t.songs});case q:return Object(h.a)(Object(h.a)({},e),{},{likedSongCount:t.count});case G:return Object(h.a)(Object(h.a)({},e),{},{historyListen:t.songs});case K:return Object(h.a)(Object(h.a)({},e),{},{recommendation:t.songs});case H:return Object(h.a)(Object(h.a)({},e),{},{chart:t.songs});default:return e}},Qt=[],Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return e=t.areas,Object(se.a)(e);default:return e}},$t={userId:null,username:null,email:null,userToken:null},Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return e=t.user,Object(h.a)({},e);default:return e}},es={artistArea:[],artistDetail:{}},ts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:es,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(h.a)(Object(h.a)({},e),{},{artistArea:t.artists});case A:return Object(h.a)(Object(h.a)({},e),{},{artistDetail:t.artist});default:return e}},ss={suggestion:[],result:[],filterResult:[]},ns=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(h.a)(Object(h.a)({},e),{},{suggestion:t.suggestion});case F:return Object(h.a)(Object(h.a)({},e),{},{result:t.result});case B:return Object(h.a)(Object(h.a)({},e),{},{filterResult:t.result});default:return e}},as=Object(Gt.c)({player:Vt,playlist:Yt,song:Jt,area:Zt,user:Wt,artist:ts,search:ns}),rs=function(){try{var e=localStorage.getItem(Le.LOCAL_STORAGE_KEY);return JSON.parse(e)||{}}catch(t){return}}(),cs=[Kt.a],is=function(e){return e},os=Object(Gt.e)(as,rs,Object(Gt.d)(Gt.a.apply(void 0,cs),is));os.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem(Le.LOCAL_STORAGE_KEY,t)}catch(s){return}}(os.getState())}));var ls=os;c.a.render(Object(me.jsx)(i.a,{store:ls,children:Object(me.jsx)(qt,{})}),document.getElementById("root")),Ut()},21:function(e,t){e.exports={LOCAL_STORAGE_KEY:"MUSICRS",NUMBER_OF_ITEM_PER_PAGE:24}}},[[121,1,2]]]);
//# sourceMappingURL=main.9870909e.chunk.js.map